<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>编程的宗派 | YuweiYin</title>
    <meta name="description" content="Homepage of YuweiYin">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/Joey_Moon.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.2d4b740c.css" as="style"><link rel="preload" href="/assets/js/app.5fe66d2b.js" as="script"><link rel="preload" href="/assets/js/2.db22a8ef.js" as="script"><link rel="preload" href="/assets/js/78.318a4702.js" as="script"><link rel="prefetch" href="/assets/js/10.a3c5f82b.js"><link rel="prefetch" href="/assets/js/100.25f731f1.js"><link rel="prefetch" href="/assets/js/101.95520bfc.js"><link rel="prefetch" href="/assets/js/102.2a5f065a.js"><link rel="prefetch" href="/assets/js/103.ea2207e8.js"><link rel="prefetch" href="/assets/js/104.176a28b1.js"><link rel="prefetch" href="/assets/js/105.73b6444d.js"><link rel="prefetch" href="/assets/js/106.4e40fd25.js"><link rel="prefetch" href="/assets/js/107.c8a120d6.js"><link rel="prefetch" href="/assets/js/108.932f18fd.js"><link rel="prefetch" href="/assets/js/109.99384793.js"><link rel="prefetch" href="/assets/js/11.4db5e70e.js"><link rel="prefetch" href="/assets/js/110.f37d3028.js"><link rel="prefetch" href="/assets/js/111.9c3728dd.js"><link rel="prefetch" href="/assets/js/112.9b20b881.js"><link rel="prefetch" href="/assets/js/113.8afa9829.js"><link rel="prefetch" href="/assets/js/114.d6b67040.js"><link rel="prefetch" href="/assets/js/115.b111a31c.js"><link rel="prefetch" href="/assets/js/116.05c26ded.js"><link rel="prefetch" href="/assets/js/117.23007ff9.js"><link rel="prefetch" href="/assets/js/118.6bb0ac3f.js"><link rel="prefetch" href="/assets/js/119.0e90ff0c.js"><link rel="prefetch" href="/assets/js/12.9d54cbe3.js"><link rel="prefetch" href="/assets/js/120.5fe35fef.js"><link rel="prefetch" href="/assets/js/121.53aef676.js"><link rel="prefetch" href="/assets/js/122.28500515.js"><link rel="prefetch" href="/assets/js/123.6014dfed.js"><link rel="prefetch" href="/assets/js/124.47bd67e9.js"><link rel="prefetch" href="/assets/js/125.d5df8c6e.js"><link rel="prefetch" href="/assets/js/126.b5452614.js"><link rel="prefetch" href="/assets/js/127.80127f3a.js"><link rel="prefetch" href="/assets/js/128.fb05e0d3.js"><link rel="prefetch" href="/assets/js/129.29f21c7c.js"><link rel="prefetch" href="/assets/js/13.72e7ec90.js"><link rel="prefetch" href="/assets/js/130.20d56e75.js"><link rel="prefetch" href="/assets/js/131.272c54da.js"><link rel="prefetch" href="/assets/js/132.443fab1f.js"><link rel="prefetch" href="/assets/js/133.7f924f45.js"><link rel="prefetch" href="/assets/js/134.ffbc102d.js"><link rel="prefetch" href="/assets/js/135.7cfe27e8.js"><link rel="prefetch" href="/assets/js/136.9ec27922.js"><link rel="prefetch" href="/assets/js/137.20e4c90e.js"><link rel="prefetch" href="/assets/js/138.aafd2cb3.js"><link rel="prefetch" href="/assets/js/139.5a776289.js"><link rel="prefetch" href="/assets/js/14.08fda9d5.js"><link rel="prefetch" href="/assets/js/140.7f0d5a76.js"><link rel="prefetch" href="/assets/js/141.62809160.js"><link rel="prefetch" href="/assets/js/142.d3c4302e.js"><link rel="prefetch" href="/assets/js/143.231887f0.js"><link rel="prefetch" href="/assets/js/144.5ad5130c.js"><link rel="prefetch" href="/assets/js/145.38af9eb2.js"><link rel="prefetch" href="/assets/js/146.034fc5e5.js"><link rel="prefetch" href="/assets/js/147.f318a0a8.js"><link rel="prefetch" href="/assets/js/148.77061ccb.js"><link rel="prefetch" href="/assets/js/149.c092d85c.js"><link rel="prefetch" href="/assets/js/15.4c4120da.js"><link rel="prefetch" href="/assets/js/150.a054bff2.js"><link rel="prefetch" href="/assets/js/151.826fa71b.js"><link rel="prefetch" href="/assets/js/152.527e6077.js"><link rel="prefetch" href="/assets/js/153.81d679d7.js"><link rel="prefetch" href="/assets/js/154.2bc5ffde.js"><link rel="prefetch" href="/assets/js/155.b9b13530.js"><link rel="prefetch" href="/assets/js/16.b57803b5.js"><link rel="prefetch" href="/assets/js/17.6c67a731.js"><link rel="prefetch" href="/assets/js/18.4314a4f9.js"><link rel="prefetch" href="/assets/js/19.98325dd7.js"><link rel="prefetch" href="/assets/js/20.58497778.js"><link rel="prefetch" href="/assets/js/21.ee85575b.js"><link rel="prefetch" href="/assets/js/22.f9177e8a.js"><link rel="prefetch" href="/assets/js/23.535f5278.js"><link rel="prefetch" href="/assets/js/24.98239ac0.js"><link rel="prefetch" href="/assets/js/25.3fa496a9.js"><link rel="prefetch" href="/assets/js/26.12a234e5.js"><link rel="prefetch" href="/assets/js/27.11e9a72b.js"><link rel="prefetch" href="/assets/js/28.9609bd69.js"><link rel="prefetch" href="/assets/js/29.b8f23768.js"><link rel="prefetch" href="/assets/js/3.50f8bbe8.js"><link rel="prefetch" href="/assets/js/30.fc389988.js"><link rel="prefetch" href="/assets/js/31.1e97f7b3.js"><link rel="prefetch" href="/assets/js/32.b2fba7e7.js"><link rel="prefetch" href="/assets/js/33.8274d279.js"><link rel="prefetch" href="/assets/js/34.ba3d1402.js"><link rel="prefetch" href="/assets/js/35.c41e1c7b.js"><link rel="prefetch" href="/assets/js/36.f3b32f34.js"><link rel="prefetch" href="/assets/js/37.1e204cb6.js"><link rel="prefetch" href="/assets/js/38.fc3f1b10.js"><link rel="prefetch" href="/assets/js/39.3d75fb7e.js"><link rel="prefetch" href="/assets/js/4.afea0107.js"><link rel="prefetch" href="/assets/js/40.f957f497.js"><link rel="prefetch" href="/assets/js/41.2c46ce9d.js"><link rel="prefetch" href="/assets/js/42.2c181064.js"><link rel="prefetch" href="/assets/js/43.ac880784.js"><link rel="prefetch" href="/assets/js/44.c844b0f2.js"><link rel="prefetch" href="/assets/js/45.1dac8487.js"><link rel="prefetch" href="/assets/js/46.94667594.js"><link rel="prefetch" href="/assets/js/47.f250da85.js"><link rel="prefetch" href="/assets/js/48.bc3995b5.js"><link rel="prefetch" href="/assets/js/49.c65e96f2.js"><link rel="prefetch" href="/assets/js/5.2b1d7a9b.js"><link rel="prefetch" href="/assets/js/50.2ce67839.js"><link rel="prefetch" href="/assets/js/51.c4e2bee0.js"><link rel="prefetch" href="/assets/js/52.51e753d3.js"><link rel="prefetch" href="/assets/js/53.f43494bc.js"><link rel="prefetch" href="/assets/js/54.96a786f8.js"><link rel="prefetch" href="/assets/js/55.f5eac491.js"><link rel="prefetch" href="/assets/js/56.0d83c660.js"><link rel="prefetch" href="/assets/js/57.4246a61a.js"><link rel="prefetch" href="/assets/js/58.4940b2c6.js"><link rel="prefetch" href="/assets/js/59.5c48a75b.js"><link rel="prefetch" href="/assets/js/6.69130e47.js"><link rel="prefetch" href="/assets/js/60.2ecaa699.js"><link rel="prefetch" href="/assets/js/61.579c6b40.js"><link rel="prefetch" href="/assets/js/62.e06c706c.js"><link rel="prefetch" href="/assets/js/63.e634b4b5.js"><link rel="prefetch" href="/assets/js/64.642cdc35.js"><link rel="prefetch" href="/assets/js/65.90871f39.js"><link rel="prefetch" href="/assets/js/66.61464e4e.js"><link rel="prefetch" href="/assets/js/67.f7dca67e.js"><link rel="prefetch" href="/assets/js/68.3b78c51b.js"><link rel="prefetch" href="/assets/js/69.1eb0e02e.js"><link rel="prefetch" href="/assets/js/7.a7c09506.js"><link rel="prefetch" href="/assets/js/70.5306286c.js"><link rel="prefetch" href="/assets/js/71.952be6cf.js"><link rel="prefetch" href="/assets/js/72.36f9472d.js"><link rel="prefetch" href="/assets/js/73.9f34a1bf.js"><link rel="prefetch" href="/assets/js/74.516357ef.js"><link rel="prefetch" href="/assets/js/75.b8860c49.js"><link rel="prefetch" href="/assets/js/76.a8838f91.js"><link rel="prefetch" href="/assets/js/77.f33fd1a7.js"><link rel="prefetch" href="/assets/js/79.2d604598.js"><link rel="prefetch" href="/assets/js/8.237cb64d.js"><link rel="prefetch" href="/assets/js/80.20cc8933.js"><link rel="prefetch" href="/assets/js/81.0502a089.js"><link rel="prefetch" href="/assets/js/82.dc550a28.js"><link rel="prefetch" href="/assets/js/83.42b6df92.js"><link rel="prefetch" href="/assets/js/84.5b07f534.js"><link rel="prefetch" href="/assets/js/85.b280078f.js"><link rel="prefetch" href="/assets/js/86.9061351d.js"><link rel="prefetch" href="/assets/js/87.25b9a4d9.js"><link rel="prefetch" href="/assets/js/88.74a3576d.js"><link rel="prefetch" href="/assets/js/89.0aa450f8.js"><link rel="prefetch" href="/assets/js/9.e7b6c0c9.js"><link rel="prefetch" href="/assets/js/90.6df32b76.js"><link rel="prefetch" href="/assets/js/91.cc347fca.js"><link rel="prefetch" href="/assets/js/92.29acb8a9.js"><link rel="prefetch" href="/assets/js/93.ab281914.js"><link rel="prefetch" href="/assets/js/94.a7ee16fc.js"><link rel="prefetch" href="/assets/js/95.18fcad10.js"><link rel="prefetch" href="/assets/js/96.c6839ad4.js"><link rel="prefetch" href="/assets/js/97.3cb1ddc1.js"><link rel="prefetch" href="/assets/js/98.cfabecd9.js"><link rel="prefetch" href="/assets/js/99.2d3b457c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2d4b740c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">YuweiYin</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/home/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章" class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/article/technology/" class="nav-link">
  技术
</a></li><li class="dropdown-item"><!----> <a href="/article/essay/" class="nav-link">
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/article/other/" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="/article/reprint/" class="nav-link router-link-active">
  转载
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://www.github.com/YuweiYin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/home/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章" class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/article/technology/" class="nav-link">
  技术
</a></li><li class="dropdown-item"><!----> <a href="/article/essay/" class="nav-link">
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/article/other/" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="/article/reprint/" class="nav-link router-link-active">
  转载
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://www.github.com/YuweiYin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/article/reprint/" class="sidebar-link">Reprint</a></li><li><a href="/article/reprint/yinwang/20120518-什么是“对用户友好”.html" class="sidebar-link">什么是“对用户友好”</a></li><li><a href="/article/reprint/yinwang/20120704-GTF-Great Teacher Friedman.html" class="sidebar-link">GTF - Great Teacher Friedman</a></li><li><a href="/article/reprint/yinwang/20120725-什么是语义学.html" class="sidebar-link">什么是语义学</a></li><li><a href="/article/reprint/yinwang/20120801-怎样写一个解释器.html" class="sidebar-link">怎样写一个解释器</a></li><li><a href="/article/reprint/yinwang/20120918-TeXmacs-一个真正“所见即所得”的排版系统.html" class="sidebar-link">TeXmacs：一个真正“所见即所得”的排版系统.md</a></li><li><a href="/article/reprint/yinwang/20130304-Braid-一个发人深思的游戏.html" class="sidebar-link">Braid - 一个发人深思的游戏</a></li><li><a href="/article/reprint/yinwang/20130307-解密“设计模式”.html" class="sidebar-link">解密“设计模式”</a></li><li><a href="/article/reprint/yinwang/20130307-谈 Linux，Windows 和 Mac.html" class="sidebar-link">谈 Linux，Windows 和 Mac</a></li><li><a href="/article/reprint/yinwang/20130307-Oberon操作系统-被忽略的珍宝.html" class="sidebar-link">Oberon 操作系统：被忽略的珍宝</a></li><li><a href="/article/reprint/yinwang/20130308-谈语法.html" class="sidebar-link">谈语法</a></li><li><a href="/article/reprint/yinwang/20130315-程序语言的常见设计错误(1)-片面追求短小.html" class="sidebar-link">程序语言的常见设计错误(1) - 片面追求短小</a></li><li><a href="/article/reprint/yinwang/20130319-“解决问题”与“消灭问题”.html" class="sidebar-link">“解决问题”与“消灭问题”</a></li><li><a href="/article/reprint/yinwang/20130324-论对东西的崇拜.html" class="sidebar-link">论对东西的崇拜</a></li><li><a href="/article/reprint/yinwang/20130326-Lisp 已死，Lisp 万岁！.html" class="sidebar-link">论对东西的崇拜</a></li><li><a href="/article/reprint/yinwang/20130328-Chez Scheme 的传说.html" class="sidebar-link">Chez Scheme 的传说</a></li><li><a href="/article/reprint/yinwang/20130329-什么是“脚本语言”.html" class="sidebar-link">什么是“脚本语言”</a></li><li><a href="/article/reprint/yinwang/20130331-函数式语言的宗教.html" class="sidebar-link">函数式语言的宗教</a></li><li><a href="/article/reprint/yinwang/20130401-惰性求值.html" class="sidebar-link">惰性求值</a></li><li><a href="/article/reprint/yinwang/20130402-Currying的局限性.html" class="sidebar-link">Currying 的局限性</a></li><li><a href="/article/reprint/yinwang/20130403-爱因斯坦谈教育.html" class="sidebar-link">爱因斯坦谈教育</a></li><li><a href="/article/reprint/yinwang/20130407-测试驱动开发.html" class="sidebar-link">测试驱动开发</a></li><li><a href="/article/reprint/yinwang/20130410-我为什么离开Cornell.html" class="sidebar-link">我为什么离开 Cornell</a></li><li><a href="/article/reprint/yinwang/20130411-Scheme编程环境的设置.html" class="sidebar-link">Scheme 编程环境的设置</a></li><li><a href="/article/reprint/yinwang/20130412-什么是启发.html" class="sidebar-link">什么是启发</a></li><li><a href="/article/reprint/yinwang/20130413-谈程序的“通用性”.html" class="sidebar-link">谈程序的“通用性”</a></li><li><a href="/article/reprint/yinwang/20130414-标准化试卷标记语言.html" class="sidebar-link">标准化试卷标记语言</a></li><li><a href="/article/reprint/yinwang/20130414-论“我”和“我们”.html" class="sidebar-link">论“我”和“我们”</a></li><li><a href="/article/reprint/yinwang/20130414-一种新的操作系统设计.html" class="sidebar-link">一种新的操作系统设计</a></li><li><a href="/article/reprint/yinwang/20130414-Markdown的一些问题.html" class="sidebar-link">Markdown 的一些问题</a></li><li><a href="/article/reprint/yinwang/20130415-几个超炫的专业词汇.html" class="sidebar-link">几个超炫的专业词汇</a></li><li><a href="/article/reprint/yinwang/20130416-Yoda表示法错在哪里.html" class="sidebar-link">Yoda 表示法错在哪里</a></li><li><a href="/article/reprint/yinwang/20130417-关于语言的思考.html" class="sidebar-link">关于语言的思考</a></li><li><a href="/article/reprint/yinwang/20130418-程序语言的常见设计错误(2)-试图容纳世界.html" class="sidebar-link">程序语言的常见设计错误(2) - 试图容纳世界</a></li><li><a href="/article/reprint/yinwang/20130420-编辑器与IDE.html" class="sidebar-link">编辑器与IDE</a></li><li><a href="/article/reprint/yinwang/20130421-程序语言不是工具.html" class="sidebar-link">程序语言不是工具</a></li><li><a href="/article/reprint/yinwang/20130421-ydiff-结构化的程序比较.html" class="sidebar-link">ydiff - 结构化的程序比较</a></li><li><a href="/article/reprint/yinwang/20130426-原因与证明.html" class="sidebar-link">原因与证明</a></li><li><a href="/article/reprint/yinwang/20130619-我离开了Coverity.html" class="sidebar-link">我离开了 Coverity</a></li><li><a href="/article/reprint/yinwang/20130706-PyDiff-Python结构化程序比较工具.html" class="sidebar-link">PyDiff - Python 结构化程序比较工具</a></li><li><a href="/article/reprint/yinwang/20130713-丘奇和图灵.html" class="sidebar-link">丘奇和图灵</a></li><li><a href="/article/reprint/yinwang/20131125-PySonar2与Sourcegraph集成完毕.html" class="sidebar-link">PySonar2 与 Sourcegraph 集成完毕</a></li><li><a href="/article/reprint/yinwang/20140104-我和权威的故事.html" class="sidebar-link">我和权威的故事</a></li><li><a href="/article/reprint/yinwang/20140125-程序语言与…….html" class="sidebar-link">程序语言与……</a></li><li><a href="/article/reprint/yinwang/20140128-RubySonar-一个Ruby静态分析器.html" class="sidebar-link">RubySonar：一个 Ruby 静态分析器</a></li><li><a href="/article/reprint/yinwang/20140204-程序语言与它们的工具.html" class="sidebar-link">程序语言与它们的工具</a></li><li><a href="/article/reprint/yinwang/20140209-程序员的心理疾病.html" class="sidebar-link">程序员的心理疾病</a></li><li><a href="/article/reprint/yinwang/20140215-我的第一次和最后一次Hackathon经历.html" class="sidebar-link">我的第一次和最后一次 Hackathon 经历</a></li><li><a href="/article/reprint/yinwang/20140218-一个对Dijkstra的采访视频.html" class="sidebar-link">一个对 Dijkstra 的采访视频</a></li><li><a href="/article/reprint/yinwang/20140324-学术腐败是历史的必然.html" class="sidebar-link">学术腐败是历史的必然</a></li><li><a href="/article/reprint/yinwang/20140410-电视编剧的问题.html" class="sidebar-link">电视编剧的问题</a></li><li><a href="/article/reprint/yinwang/20140411-黑客文化的精髓.html" class="sidebar-link">黑客文化的精髓</a></li><li><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html" class="sidebar-link">对 Go 语言的综合评价</a></li><li><a href="/article/reprint/yinwang/20140424-关系式模型的实质.html" class="sidebar-link">关系式模型的实质</a></li><li><a href="/article/reprint/yinwang/20140814-谦虚不是一种美德.html" class="sidebar-link">谦虚不是一种美德</a></li><li><a href="/article/reprint/yinwang/20140815-贡献和价值.html" class="sidebar-link">贡献和价值</a></li><li><a href="/article/reprint/yinwang/20140915-谈创新.html" class="sidebar-link">谈创新</a></li><li><a href="/article/reprint/yinwang/20141112-恶评《星际穿越》.html" class="sidebar-link">恶评《星际穿越》</a></li><li><a href="/article/reprint/yinwang/20150105-牛校综合征.html" class="sidebar-link">牛校综合征</a></li><li><a href="/article/reprint/yinwang/20150119-小费和中国人的尊严.html" class="sidebar-link">小费和中国人的尊严</a></li><li><a href="/article/reprint/yinwang/20150201-创造者的思维方式.html" class="sidebar-link">创造者的思维方式</a></li><li><a href="/article/reprint/yinwang/20150220-其他人的BUG.html" class="sidebar-link">其他人的BUG</a></li><li><a href="/article/reprint/yinwang/20150224-所谓“人为错误”.html" class="sidebar-link">所谓“人为错误”</a></li><li><a href="/article/reprint/yinwang/20150303-怎样尊重一个程序员.html" class="sidebar-link">怎样尊重一个程序员</a></li><li><a href="/article/reprint/yinwang/20150311-关于Git的礼节.html" class="sidebar-link">关于Git的礼节</a></li><li><a href="/article/reprint/yinwang/20150317-设计的重要性.html" class="sidebar-link">设计的重要性</a></li><li><a href="/article/reprint/yinwang/20150320-为什么拍照是个坏习惯.html" class="sidebar-link">为什么拍照是个坏习惯</a></li><li><a href="/article/reprint/yinwang/20150320-智商的圈套.html" class="sidebar-link">智商的圈套</a></li><li><a href="/article/reprint/yinwang/20150321-英语口音.html" class="sidebar-link">英语口音</a></li><li><a href="/article/reprint/yinwang/20150403-编程的宗派.html" class="active sidebar-link">编程的宗派</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20150403-编程的宗派.html#面向对象编程（object-oriented-programming）" class="sidebar-link">面向对象编程（Object-Oriented Programming）</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20150403-编程的宗派.html#函数式编程（functional-programming）" class="sidebar-link">函数式编程（Functional Programming）</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20150403-编程的宗派.html#fold以及其他" class="sidebar-link">fold以及其他</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20150403-编程的宗派.html#好好先生" class="sidebar-link">好好先生</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20150403-编程的宗派.html#符号必须简单的对世界建模" class="sidebar-link">符号必须简单的对世界建模</a></li></ul></li><li><a href="/article/reprint/yinwang/20150607-所谓软件工程.html" class="sidebar-link">所谓软件工程</a></li><li><a href="/article/reprint/yinwang/20150614-DRY原则的误区.html" class="sidebar-link">DRY原则的误区</a></li><li><a href="/article/reprint/yinwang/20150702-谈程序的正确性.html" class="sidebar-link">谈程序的正确性</a></li><li><a href="/article/reprint/yinwang/20150704-数学和编程.html" class="sidebar-link">数学和编程</a></li><li><a href="/article/reprint/yinwang/20150919-对Parser的误解.html" class="sidebar-link">对 Parser 的误解</a></li><li><a href="/article/reprint/yinwang/20151018-图灵的光环.html" class="sidebar-link">图灵的光环</a></li><li><a href="/article/reprint/yinwang/20151121-编程的智慧.html" class="sidebar-link">编程的智慧</a></li><li><a href="/article/reprint/yinwang/20151212-Tesla-Model-S的设计失误.html" class="sidebar-link">Tesla Model S 的设计失误</a></li><li><a href="/article/reprint/yinwang/20151221-Tesla-Model-X的车门设计问题.html" class="sidebar-link">Tesla Model X的车门设计问题</a></li><li><a href="/article/reprint/yinwang/20160110-Tesla-Autopilot.html" class="sidebar-link">Tesla Autopilot</a></li><li><a href="/article/reprint/yinwang/20160118-给Java说句公道话.html" class="sidebar-link">给 Java 说句公道话</a></li><li><a href="/article/reprint/yinwang/20160212-我看自动驾驶技术.html" class="sidebar-link">我看自动驾驶技术</a></li><li><a href="/article/reprint/yinwang/20160309-AlphaGo与人工智能.html" class="sidebar-link">AlphaGo与人工智能</a></li><li><a href="/article/reprint/yinwang/20160319-为什么自动车完全不可以犯错误.html" class="sidebar-link">为什么自动车完全不可以犯错误</a></li><li><a href="/article/reprint/yinwang/20160331-我为什么不再做PL人.html" class="sidebar-link">我为什么不再做 PL 人</a></li><li><a href="/article/reprint/yinwang/20160522-正面思维的误区.html" class="sidebar-link">正面思维的误区</a></li><li><a href="/article/reprint/yinwang/20160606-Swift语言的设计错误.html" class="sidebar-link">Swift 语言的设计错误</a></li><li><a href="/article/reprint/yinwang/20160608-Java有值类型吗？.html" class="sidebar-link">Java 有值类型吗？</a></li><li><a href="/article/reprint/yinwang/20160614-美国社会的信息不平等现象.html" class="sidebar-link">美国社会的信息不平等现象</a></li><li><a href="/article/reprint/yinwang/20160628-养生节目的危害.html" class="sidebar-link">养生节目的危害</a></li><li><a href="/article/reprint/yinwang/20160710-Tesla-autopilot引起致命车祸.html" class="sidebar-link">Tesla autopilot 引起致命车祸</a></li><li><a href="/article/reprint/yinwang/20160914-测试的道理.html" class="sidebar-link">测试的道理</a></li><li><a href="/article/reprint/yinwang/20160918-对Rust语言的分析.html" class="sidebar-link">对 Rust 语言的分析</a></li><li><a href="/article/reprint/yinwang/20161012-C编译器优化的Bug.html" class="sidebar-link">C 编译器优化的 Bug</a></li><li><a href="/article/reprint/yinwang/20161013-C.html#%E7%9A%84IDisposable%E6%8E%A5%E5%8F%A3.html" class="sidebar-link">C# 的 IDisposable 接口</a></li><li><a href="/article/reprint/yinwang/20170414-经验和洞察力.html" class="sidebar-link">经验和洞察力</a></li><li><a href="/article/reprint/yinwang/20170417-美国公司管理层的洗脑技巧.html" class="sidebar-link">美国公司管理层的洗脑技巧</a></li><li><a href="/article/reprint/yinwang/20170423-人工智能的局限性.html" class="sidebar-link">人工智能的局限性</a></li><li><a href="/article/reprint/yinwang/20170508-美国企业的装嫩问题.html" class="sidebar-link">美国企业的装嫩问题</a></li><li><a href="/article/reprint/yinwang/20170517-什么是现实理想主义者.html" class="sidebar-link">什么是现实理想主义者</a></li><li><a href="/article/reprint/yinwang/20170523-Kotlin和Checked-Exception.html" class="sidebar-link">Kotlin 和 Checked Exception</a></li><li><a href="/article/reprint/yinwang/20170525-DSL的误区.html" class="sidebar-link">DSL 的误区</a></li><li><a href="/article/reprint/yinwang/20170706-带猫回国经历.html" class="sidebar-link">带猫回国经历</a></li><li><a href="/article/reprint/yinwang/20170706-如何掌握所有的程序语言.html" class="sidebar-link">如何掌握所有的程序语言</a></li><li><a href="/article/reprint/yinwang/20170708-生活的智慧.html" class="sidebar-link">生活的智慧</a></li><li><a href="/article/reprint/yinwang/20170814-旅行的智慧.html" class="sidebar-link">旅行的智慧</a></li><li><a href="/article/reprint/yinwang/20170819-知乎和MITBBS.html" class="sidebar-link">知乎和 MITBBS</a></li><li><a href="/article/reprint/yinwang/20171016-人体工学.html" class="sidebar-link">人体工学</a></li><li><a href="/article/reprint/yinwang/20171101-理性的力量.html" class="sidebar-link">理性的力量</a></li><li><a href="/article/reprint/yinwang/20171109-iPhoneX.html" class="sidebar-link">iPhone X</a></li><li><a href="/article/reprint/yinwang/20180222-智能合约和形式验证.html" class="sidebar-link">智能合约和形式验证</a></li><li><a href="/article/reprint/yinwang/20180308-从苹果产品的设计错误学教训.html" class="sidebar-link">从苹果产品的设计错误学教训</a></li><li><a href="/article/reprint/yinwang/20180327-扶门的礼仪.html" class="sidebar-link">扶门的礼仪</a></li><li><a href="/article/reprint/yinwang/20180413-解谜计算机科学.html" class="sidebar-link">解谜计算机科学</a></li><li><a href="/article/reprint/yinwang/20181123-解谜英语语法.html" class="sidebar-link">解谜英语语法</a></li><li><a href="/article/reprint/yinwang/20190712-学习的智慧.html" class="sidebar-link">学习的智慧</a></li><li><a href="/article/reprint/yinwang/20190721-再谈“PvsNP”问题.html" class="sidebar-link">再谈“P vs NP”问题</a></li><li><a href="/article/reprint/yinwang/20190731-关于人的素质.html" class="sidebar-link">关于人的素质</a></li><li><a href="/article/reprint/yinwang/20190817-中国人的信任危机.html" class="sidebar-link">中国人的信任危机</a></li><li><a href="/article/reprint/yinwang/20190819-关于微内核的对话.html" class="sidebar-link">关于微内核的对话</a></li><li><a href="/article/reprint/yinwang/20190911-Talk-is-not-cheap.html" class="sidebar-link">Talk is not cheap</a></li><li><a href="/article/reprint/yinwang/20190914-机器与人类视觉能力的差距（1）.html" class="sidebar-link">机器与人类视觉能力的差距（1）</a></li><li><a href="/article/reprint/yinwang/20190915-机器与人类视觉能力的差距（2）.html" class="sidebar-link">机器与人类视觉能力的差距（2）</a></li><li><a href="/article/reprint/yinwang/20190916-机器与人类视觉能力的差距（3）.html" class="sidebar-link">机器与人类视觉能力的差距（3）</a></li><li><a href="/article/reprint/yinwang/20190930-自动驾驶车的责任和风险分析.html" class="sidebar-link">自动驾驶车的责任和风险分析</a></li><li><a href="/article/reprint/yinwang/20191017-免费食物不是好事.html" class="sidebar-link">免费食物不是好事</a></li><li><a href="/article/reprint/yinwang/20191024-写在1024程序员节.html" class="sidebar-link">写在 1024 程序员节</a></li><li><a href="/article/reprint/yinwang/20191105-永恒.html" class="sidebar-link">永恒</a></li><li><a href="/article/reprint/yinwang/20191215-自动化服务的误区.html" class="sidebar-link">自动化服务的误区</a></li><li><a href="/article/reprint/yinwang/20191223-抱怨与观察的差别.html" class="sidebar-link">抱怨与观察的差别</a></li><li><a href="/article/reprint/yinwang/20191224-我不是编译器专家.html" class="sidebar-link">我不是编译器专家</a></li><li><a href="/article/reprint/yinwang/20191226-所谓“成功”.html" class="sidebar-link">所谓“成功”</a></li><li><a href="/article/reprint/yinwang/20191231-2020新年寄语.html" class="sidebar-link">2020新年寄语</a></li><li><a href="/article/reprint/yinwang/20200115-未来的事业.html" class="sidebar-link">未来的事业</a></li><li><a href="/article/reprint/yinwang/20200116-我的事业计划.html" class="sidebar-link">我的事业计划</a></li><li><a href="/article/reprint/yinwang/20200117-顾问业务试运营（v2.0）.html" class="sidebar-link">顾问业务试运营（v2.0）</a></li><li><a href="/article/reprint/yinwang/20200205-如何阅读别人的代码.html" class="sidebar-link">如何阅读别人的代码</a></li><li><a href="/article/reprint/yinwang/20200213-一道Java面试题.html" class="sidebar-link">一道 Java 面试题</a></li><li><a href="/article/reprint/yinwang/20200303-计算机科学课程.html" class="sidebar-link">计算机科学课程</a></li><li><a href="/article/reprint/yinwang/20200305-知识星球试运营.html" class="sidebar-link">知识星球试运营</a></li><li><a href="/article/reprint/yinwang/20200306-英语学习的一些经验.html" class="sidebar-link">英语学习的一些经验</a></li><li><a href="/article/reprint/yinwang/20200317-谈知识的交流.html" class="sidebar-link">谈知识的交流</a></li><li><a href="/article/reprint/yinwang/20200323-对智商的怀疑.html" class="sidebar-link">对智商的怀疑</a></li><li><a href="/article/reprint/yinwang/20200326-计算机科学入门班报名.html" class="sidebar-link">计算机科学入门班报名</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="编程的宗派"><a href="#编程的宗派" class="header-anchor">#</a> 编程的宗派</h1> <p>2015年04月03日 - <a href="http://www.yinwang.org/" target="_blank" rel="noopener noreferrer">王垠<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://www.yinwang.org/blog-cn/2015/04/03/paradigms" target="_blank" rel="noopener noreferrer">原文链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <p>总是有人喜欢争论这类问题，到底是“函数式编程”（FP）好，还是“面向对象编程”（OOP）好。既然出了两个帮派，就有人积极地做它们的帮众，互相唾骂和鄙视。然后呢又出了一个“好好先生帮”，这个帮的人喜欢说，管它什么范式呢，能解决问题的工具就是好工具！我个人其实不属于这三帮人中的任何一个。</p> <h2 id="面向对象编程（object-oriented-programming）"><a href="#面向对象编程（object-oriented-programming）" class="header-anchor">#</a> 面向对象编程（Object-Oriented Programming）</h2> <p>如果你看透了表面现象就会发现，其实“面向对象编程”本身没有引入很多新东西。所谓“面向对象语言”，就是经典的“过程式语言”（比如 Pascal），加上一点抽象能力。所谓“类”和“对象”，基本是过程式语言里面的记录（record，或者叫结构，structure），它本质其实是一个从名字到数据的“映射表”（map）。</p> <p>你可以用名字从这个表里面提取相应的数据。比如 point.x，就是用名字 x 从记录 point 里面提取相应的数据。这比起数组来是一件更方便的事情，因为你不需要记住存放数据的下标。即使你插入了新的数据成员，仍然可以用原来的名字来访问已有的数据，而不用担心下标错位的问题。</p> <p>所谓“对象思想”（区别于“面向对象”），实际上就是对这种数据访问方式的进一步抽象。一个经典的例子就是平面点的数据结构。如果你把一个点存储为：</p> <div class="language- extra-class"><pre class="language-text"><code>struct Point {
  double x;
  double y;
}
</code></pre></div><p>那么你用 point.x 和 point.y 可以直接访问它的 X 和 Y 坐标。你也可以把它存储为“极坐标”方式：</p> <div class="language- extra-class"><pre class="language-text"><code>struct Point {
  double r;
  double angle;
}
</code></pre></div><p>这样你可以用 point.r 和 point.angle 访问它的模和角度。现在问题来了，如果你的代码开头把 Point 定义为第一种 XY 的方式，使用 point.x, point.y 访问 X 和 Y 坐标，后来你又决定改变 Point 的存储方式，用极坐标，你却不想修改已有的含有 point.x 和 point.y 的代码，怎么办呢？</p> <p>这就是“对象思想”的价值，它让你可以通过“间接”（indirection，或者叫做“抽象”）来 改变 point.x和point.y 的语义，从而让使用者的代码完全不用修改。虽然你的实际数据结构里面可能没有 x 和 y 这两个成员，但由于 .x 和 .y 可以被重新定义，所以你可以通过改变 .x 和 .y 的定义来“模拟”它们。在你使用 point.x 和 point.y 的时候，系统内部其实在运行两片代码（所谓 getter），它们的作用是从 r 和 angle 计算出 x 和 y 的值。这样你的代码就感觉 x 和 y 是实际存在的成员一样，而其实它们是被临时算出来的。</p> <p>在 Python 之类的语言里面，你可以通过定义 “<a href="https://docs.python.org/2/library/functions.html#property" target="_blank" rel="noopener noreferrer">property<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>” 来直接改变 point.x 和 point.y 的语义。在 Java 里稍微麻烦一些，你需要使用 point.getX() 和 point.getY() 这样的写法。然而它们最后的目的其实都是一样的——它们为数据访问提供了一层“间接”（抽象）。</p> <p>这种抽象有时候是个好主意，它甚至可以跟量子力学的所谓“不可观测性”扯上关系。你觉得这个原子里面有 10 个电子？也许它们只是像 point.x 给你的幻觉一样，也许宇宙里根本就没有电子这种东西，也许你每次看到所谓的电子，它都是临时生成出来逗你玩的呢？然而，对象思想的价值也就到此为止了。你见过的所谓“面向对象思想”，几乎无一例外可以从这个想法推广出来。面向对象语言的绝大部分特性，其实是过程式语言早就提供的。因此我觉得，其实没有语言可以叫做“面向对象语言”。就像一个人为一个公司贡献了一点点代码，并不足以让公司以他的名字命名一样。</p> <p>“对象思想”作为数据访问的方式，是有一定好处的。然而“面向对象”（多了“面向”两个字），就是把这种本来良好的思想东拉西扯，牵强附会，发挥过了头。很多面向对象语言号称“所有东西都是对象”（Everything is an Object），把所有函数都放进所谓对象里面，叫做“方法”（method），把普通的函数叫做“静态方法”（static method）。实际上呢，就像我之前的例子，只有极少需要抽象的时候，你需要使用内嵌于对象之内，跟数据紧密结合的“方法”。其他的时候，你其实只是想表达数据之间的变换操作，这些完全可以用普通的函数表达，而且这样做更加简单和直接。</p> <p>这种把所有函数放进方法的做法是本末倒置的，因为函数并不属于对象。绝大部分函数是独立于对象的，它们不能被叫做“方法”。强制把所有函数放进它们本来不属于的对象里面，把它们全都作为“方法”，导致了面向对象代码逻辑过度复杂。很简单的想法，非得绕好多道弯子才能表达清楚。很多时候这就像把自己的头塞进屁股里面。</p> <p>这就是为什么我喜欢开玩笑说，面向对象编程就像“<a href="https://zh.wikipedia.org/wiki/%E5%9C%B0%E5%B9%B3%E8%AA%AA" target="_blank" rel="noopener noreferrer">地平说<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>”（Flat Earth Theory）。当然你可以说地球是一个平面。对于局部的，小规模的现象，它没有问题。然而对于通用的，大规模的情况，它却不是自然，简单和直接的。直到<a href="https://www.theflatearthsociety.org/home/" target="_blank" rel="noopener noreferrer">今天<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，你仍然可以无止境的寻找证据，扭曲各种物理定律，自圆其说地平说的幻觉，然而这会让你的理论非常复杂，经常需要缝缝补补还难以理解。</p> <p>面向对象语言不仅有自身的根本性错误，而且由于面向对象语言的设计者们常常是半路出家，没有受到过严格的语言理论和设计训练却又自命不凡，所以经常搞出另外一些奇葩的东西。比如在 JavaScript 里面，每个函数同时又可以作为构造函数（constructor），所以每个函数里面都隐含了一个 this 变量，你嵌套多层对象和函数的时候就发现没法访问外层的 this，非得“bind”一下。Python 的变量定义和赋值不分，所以你需要访问全局变量的时候得用 global 关键字，后来又发现如果要访问“中间层”的变量，没有办法了，所以又加了个 nonlocal 关键字。Ruby 先后出现过四种类似 lambda 的东西，每个都有自己的怪癖…… 有些人问我为什么有些语言设计成那个样子，我只能说，很多语言设计者其实根本不知道自己在干什么。</p> <p>软件领域就是喜欢制造宗派。“面向对象”当年就是乘火打劫，扯着各种幌子，成为了一种宗派，给很多人洗了脑。到底什么样的语言才算是“面向对象语言”？这样基本的问题至今没有确切的答案，足以说明所谓面向对象，基本都是扯淡。每当你指出某个 OO 语言 X 的弊端，就会有人跟你说，其实 X 不是“地道的” OO 语言，你应该去看看另外一个 OO 语言 Y。等你发现 Y 也有差不多的问题，有人又会让你去看 Z…… 直到最后，他们告诉你，只有 Smalltalk 才是地道的 O O语言。这不是很搞笑吗，说一个根本没人用的语言才是地道的 OO 语言，这就像在说只有死人的话才是对的。这就像是一群政客在踢皮球，推卸责任。</p> <p>等你真正看看 Smalltalk 才发现，其实面向对象语言的根本毛病就是由它而来的， Smalltalk 并不是很好的语言。很多人至今不知道自己所用的“面向对象语言”里面的很多优点，都是从过程式语言继承来的。每当发生函数式与面向对象式语言的口水战，都会有面向对象的帮众拿出这些过程式语言早就有的优点来进行反驳：“你说面向对象不好，看它能做这个……” 拿别人的优点撑起自己的门面，却看不到事物实质的优点，这样的辩论纯粹是鸡同鸭讲。</p> <h2 id="函数式编程（functional-programming）"><a href="#函数式编程（functional-programming）" class="header-anchor">#</a> 函数式编程（Functional Programming）</h2> <p>函数式语言一直以来比较低调，直到最近由于并发计算编程瓶颈的出现，以及 Haskell，Scala 之类语言社区的大力鼓吹，它忽然变成了一种宗派。有人盲目的相信函数式编程能够奇迹般的解决并发计算的难题，而看不到实质存在的，独立于语言的问题。被函数式语言洗脑的帮众，喜欢否定其它语言的一切，看低其它程序员。特别是有些初学编程的人，俨然把函数式编程当成了一天瘦二十斤的减肥神药，以为自己从函数式语言入手，就可以对经验超过他十年以上的老程序员说三道四，仿佛别人不用函数式语言就什么都不懂一样。</p> <h3 id="函数式编程的优点"><a href="#函数式编程的优点" class="header-anchor">#</a> 函数式编程的优点</h3> <p>函数式编程当然提供了它自己的价值。函数式编程相对于面向对象最大的价值，莫过于对于函数的正确理解。在函数式语言里面，函数是“一类公民”（first-class）。它们可以像 1, 2, “hello”，true，对象…… 之类的“值”一样，在任意位置诞生，通过变量，参数和数据结构传递到其它地方，可以在任何位置被调用。这些是很多过程式语言和面向对象语言做不到的事情。很多所谓“面向对象设计模式”（design pattern），都是因为面向对象语言没有 first-class function，所以导致了每个函数必须被包在一个对象里面才能传递到其它地方。</p> <p>函数式编程的另一个贡献，是它们的类型系统。函数式语言对于类型的思维，往往非常的严密。函数式语言的类型系统，往往比面向对象语言来得严密和简单很多，它们可以帮助你对程序进行严密的逻辑推理。然而类型系统一是把双刃剑，如果你对它看得太重，它反而会带来不必要的复杂性和过度工程。这个我在下面讲讲。</p> <h3 id="各种-白象-（white-elephant）"><a href="#各种-白象-（white-elephant）" class="header-anchor">#</a> 各种“白象”（white elephant）</h3> <p>所谓白象，“white elephant”，是指被人奉为神圣，价格昂贵，却没有实际用处的东西。函数式语言里面有很好的东西，然而它们里面有很多多余的特性，这些特性跟白象的性质类似。</p> <p>函数式语言的“拥护者”们，往往认为这个世界本来应该是“纯”（pure）的，不应该有任何“副作用”。他们把一切的“赋值操作”看成低级弱智的作法。他们很在乎所谓尾递归，类型推导，fold，currying，maybe type 等等。他们以自己能写出使用这些特性的代码为豪。可是殊不知，那些东西其实除了能自我安慰，制造高人一等的幻觉，并不一定能带来真正优秀可靠的代码。</p> <h3 id="纯函数"><a href="#纯函数" class="header-anchor">#</a> 纯函数</h3> <p>半壶水都喜欢响叮当。很多喜欢自吹为“函数式程序员”的人，往往并不真的理解函数式语言的本质。他们一旦看到过程式语言的写法就嗤之以鼻。比如以下这个 C 函数：</p> <div class="language- extra-class"><pre class="language-text"><code>int f(int x) {
    int y = 0;
    int z = 0;
    y = 2 * x;
    z = y + 1;
    return z / 3;
}
</code></pre></div><p>很多函数式程序员可能看到那几个赋值操作就皱起眉头，然而他们看不到的是，这是一个真正意义上的“纯函数”，它在本质上跟 Haskell 之类语言的函数是一样的，也许还更加优雅一些。</p> <p>盲目鄙视赋值操作的人，也不理解“数据流”的概念。其实不管是对局部变量赋值还是把它们作为参数传递，其实本质上都像是把一个东西放进一个管道，或者把一个电信号放在一根导线上，只不过这个管道或者导线，在不同的语言范式里放置的方向和样式有一点不同而已！</p> <h3 id="对数据结构的忽视"><a href="#对数据结构的忽视" class="header-anchor">#</a> 对数据结构的忽视</h3> <p>函数式语言的帮众没有看清楚的另一个重要的，致命的东西，是数据结构的根本性和重要性。数据结构的有些问题是“物理”和“本质”地存在的，不是换个语言或者换个风格就可以奇迹般消失掉的。函数式语言的拥护者们喜欢盲目的相信和使用列表（list），而没有看清楚它的本质以及它所带来的时间复杂度。列表带来的问题，不仅仅是编程的复杂性。不管你怎么聪明的使用它，很多性能问题是根本没法解决的，因为列表的拓扑结构根本就不适合用来干有些事情！</p> <p>从数据结构的角度看，Lisp 所谓的list就是一个单向链表。你必须从上一个节点才能访问下一个，而这每一次“间接寻址”，都是需要时间的。在这种数据结构下，很简单的像 length 或者 append 之类函数，时间复杂度都是 O(n)！为了绕过这数据结构的不足，所谓的“Lisp风格”告诉你，不要反复 append，因为那样复杂度是 O(n2)。如果需要反复把元素加到列表末尾，那么应该先反复 cons，然后再 reverse一下。</p> <p>很可惜的是，当你同时有递归调用，就会发现 cons + reverse 的做法颠来倒去的，非常容易出错。有时候列表是正的，有时候是反的，有时候一部分是反的…… 这种方式用一次还可以，多几层递归之后，自己都把自己搞糊涂了。好不容易做对了，下次修改可能又会出错。然而就是有人喜欢显示自己聪明，喜欢自虐，迎着这类人为制造的“困难”勇往直前。</p> <p>富有讽刺意味的是，半壶水的 Lisp 程序员都喜欢用 list，真正的 Lisp 大师级人物，却知道什么时候应该使用记录（结构）或者数组。在 Indiana 大学，我曾经上过一门 Scheme（一种现代 Lisp 方言）编译器的课程，授课的老师是 R. Kent Dybvig，他是世界上最先进的 Scheme 编译器 Chez Scheme 的作者。我们的课程编译器的数据结构（包括 AST）都是用 list 表示的。到了期末的时候，Kent 对我们说：“你们的编译器已经可以生成跟我的 Chez Scheme 媲美的代码，然而 Chez Scheme 不止生成高效的目标代码，它的编译速度是你们的 700 倍以上。它可以在 5 秒钟之内编译它自己。” 然后他透露了一点 Chez Scheme 速度快的原因。其中一个原因，就是因为 Chez Scheme 的内部数据结构不是 list。在编译一开头的时候，Chez Scheme 就已经把输入代码转换成了数组一样的，固定长度的结构。后来在工业界的经验教训也告诉了我，数组比起链表，确实在某些时候有大幅度的性能提升。在什么时候该用链表，什么时候该用数组，是一门艺术。</p> <h3 id="副作用的根本价值"><a href="#副作用的根本价值" class="header-anchor">#</a> 副作用的根本价值</h3> <p>对数据结构的忽视，跟纯函数式语言盲目排斥副作用的“教义”有很大关系。过度的使用副作用当然是有害的，然而副作用这种东西，其实是根本的，有用的。对于这一点，我喜欢跟人这样讲：在计算机和电子线路最开头发明的时候，所有的线路都是“纯”的，因为逻辑门和导线没有任何记忆数据的能力。后来有人发明了触发器（flip-flop），才有了所谓“副作用”。是副作用让我们可以存储中间数据，从而不需要把所有数据都通过不同的导线传输到需要的地方。没有副作用的语言，就像一个没有无线电，没有光的世界，所有的数据都必须通过实在的导线传递，这许多纷繁的电缆，必须被正确的连接和组织，才能达到需要的效果。我们为什么喜欢 WiFi，4G 网，Bluetooth，这也就是为什么一个语言不应该是“纯”的。</p> <p>副作用也是某些重要的数据结构的重要组成元素。其中一个例子是哈希表。纯函数语言的拥护者喜欢盲目的排斥哈希表的价值，说自己可以用纯的树结构来达到一样的效果。然而事实却是，这些纯的数据结构是不可能达到有副作用的数据结构的性能的。所谓纯函数数据结构，因为在每一次“修改”时都需要保留旧的结构，所以往往需要大量的拷贝数据，然后依赖垃圾回收（GC）去消灭这些旧的数据。要知道，内存的分配和释放都是需要时间和能量的。盲目的依赖 GC，导致了纯函数数据结构内存分配和释放过于频繁，无法达到有副作用数据结构的性能。要知道，副作用是电子线路和物理支持的高级功能。盲目的相信和使用纯函数写法，其实是在浪费已有的物理支持的操作。</p> <h2 id="fold以及其他"><a href="#fold以及其他" class="header-anchor">#</a> fold以及其他</h2> <p>大量使用 fold 和 <a href="http://www.yinwang.org/blog-cn/2013/04/02/currying" target="_blank" rel="noopener noreferrer">currying<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的代码，写起来貌似很酷，读起来却不必要的痛苦。很多人根本不明白 fold 的本质，却老喜欢用它，因为他们觉得那是函数式编程的“精华”，可以显示自己的聪明。然而他们没有看到的是，fold 包含的精髓，只不过是在列表（list）上做递归的“通用模板”，这个模板需要你填进去三个参数，就可以生成一个新的递归函数调用。所以每一个 fold 的调用，本质上都包含了一个在列表上的递归函数定义。</p> <p>Fold 的问题在于，它定义了一个递归函数，却没有给它一个一目了然的名字。使用 fold 的结果是，每次看到一个 fold 调用，你都需要重新读懂它的定义，琢磨它到底是干什么的。而且 fold 调用只显示了递归模板需要的部分，而把递归的主体隐藏在了 fold 本身的“框架”里。比起直接写出整个递归定义，这种遮遮掩掩的做法，其实是更难理解的。比如，当你看到这句 Haskell 代码：</p> <p><code>foldr (+) 0 [1,2,3]</code></p> <p>你知道它是做什么的吗？也许你一秒钟之后就凭经验琢磨出，它是在对 [1,2,3] 里的数字进行求和，本质上相当于 sum [1,2,3]。虽然只花了一秒钟，可你仍然需要琢磨。如果 fold 里面带有更复杂的函数，而不是 +，那么你可能一分钟都琢磨不透。写起来倒没有费很大力气，可为什么我每次读这段代码，都需要看到 + 和 0 这两个跟自己的意图毫无关系的东西？万一有人不小心写错了，那里其实不是 + 和 0 怎么办？为什么我需要搞清楚 +, 0, [1,2,3] 的相对位置以及它们的含义？</p> <p>这样的写法其实还不如老老实实写一个递归函数，给它一个有意义名字（比如 sum），这样以后看到这个名字被调用，比如 sum [1,2,3]，你想都不用想就知道它要干什么。定义 sum 这样的名字虽然稍微增加了写代码时的工作，却给读代码的时候带来了方便。为了写的时候简洁或者很酷而用 fold，其实增加了读代码时的脑力开销。要知道代码被读的次数，要比被写的次数多很多，所以使用 fold 往往是得不偿失的。然而，被函数式编程洗脑的人，却看不到这一点。他们太在乎显示给别人看，我也会用 fold！</p> <p>与 fold 类似的白象，还有 <a href="http://www.yinwang.org/blog-cn/2013/04/02/currying" target="_blank" rel="noopener noreferrer">currying<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，Hindley-Milner 类型推导等特性。看似很酷，但等你仔细推敲才发现，它们带来的麻烦，比它们解决的问题其实还要多。有些特性声称解决的问题，其实根本就不存在。现在我把一些函数式语言的特性，以及它们包含的陷阱简要列举一下：</p> <ol><li><p>fold。fold 等“递归模板”，相当于把递归函数定义插入到调用的地方，而不给它们名字。这样导致每次读代码都需要理解几乎整个递归函数的定义。</p></li> <li><p><a href="http://www.yinwang.org/blog-cn/2013/04/02/currying" target="_blank" rel="noopener noreferrer">currying<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。貌似很酷，可是被部分调用的参数只能从左到右，依次进行。如何安排参数的顺序成了问题。大部分时候还不如直接制造一个新的 lambda，在内部调用旧的函数，这样可以任意的安排参数顺序。</p></li> <li><p>Hindley-Milner 类型推导（HM）。为了避免写参数和返回值的类型，结果给程序员写代码增加了很多的限制。为了让类型推导引擎开心，导致了很多完全合法合理优雅的代码无法写出来。其实还不如直接要程序员写出参数和返回值的类型，这工作量真的不多，而且可以准确的帮助阅读者理解参数的范围。HM 类型推导的根本问题其实在于它使用 unification 算法。Unification 其实只能表示数学里的“等价关系”（equivalence relation），而程序语言最重要的关系，subtyping，并不是一个等价关系，因为它不具有对称性（symmetry）。</p></li> <li><p>代数数据类型（algebraic data type）。所谓“代数数据类型”，其实并不如普通的类型系统（比如 Java 的）通用。很多代数数据类型系统具有所谓 sum type，这种类型其实带来过多的类型嵌套，不如通用的 union type。盲目崇拜代数数据类型的人，往往是因为盲目的相信“数学是优美的语言”。而其实事实是，数学是一种历史遗留的，毛病很多的语言。数学的语言根本没有经过系统的，全球协作的设计。往往是数学家在黑板上随便写个符号，说这个表示某概念，然后就定下来了。</p></li> <li><p>Tuple。有代数数据类型的的语言里面经常有一种构造叫做 tuple，比如 Haskel l里面可以写 (1, &quot;hello&quot;)，表示一个类型为 (Int, String) 的结构。这种构造经常被人看得过于高尚，以至于用在超越它能力的地方。其实 tuple 的本质就是一个没有名字的结构（类似 C 的 structure）。临时使用 tuple 貌似很方便，因为不需要定义一个结构类型。然而因为 tuple 没有名字，里面的成员没法用名字访问，一旦多加几个成员就发现很麻烦了。Tuple 往往只能通过模式匹配来获得里面的域，一旦你增加了新的域进去，所有对这个 tuple 的模式匹配代码都需要修改。所以 tuple 一般只能用在大小不超过 2 的情况下，而且必须确信以后不会增加新的域进去。</p></li> <li><p><a href="http://www.yinwang.org/blog-cn/2013/04/01/lazy-evaluation" target="_blank" rel="noopener noreferrer">惰性求<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>值（lazy evaluation）。貌似数学上很优雅，但其实有严重的逻辑漏洞。因为 bottom（死循环）成为了任何类型的一个元素，所以取每一个值，都可能导致死循环。同时导致代码性能难以预测，因为求值太懒，所以可能临时抱佛脚做太多工作，而平时浪费 CPU 的时间。由于到需要的时候才求值，所以在有多个处理器的时候无法有效地利用它们的计算能力。</p></li> <li><p>尾递归。大部分尾递归都相当于循环语句，然而却不像循环语句一样，能够一目了然看明白它们的意图。你需要仔细看每个分支的返回位置，判断它是不是递归，然后才能判断这代码其实是个循环。而循环语句从关键字（for，while）就知道这是一个循环，不需要去看里面是什么结构。所以等价于循环的尾递归，最好还是写成专门的循环语句。当然，尾递归在另一些情况下是有用的，这些情况不等价于循环，而是“树递归”。在这种情况下使用循环，经常需要复杂的 break 或者 continue 条件，导致循环不易理解。所以循环和尾递归都是有必要的，不要总想着用一个代替另外一个，要分情况选择合适的方式。</p></li></ol> <h2 id="好好先生"><a href="#好好先生" class="header-anchor">#</a> 好好先生</h2> <p>很多人避免“函数式 vs 面向对象”的辩论，于是他们成为了“好好先生”。这种人没有原则的认为，任何能够解决当前问题的工具就是好工具。也就是这种人，喜欢使用 shell script，喜欢折腾各种 Unix 工具，因为显然，它们能解决他“手头的问题”。</p> <p>然而这种思潮是有害的，它的害处其实更胜于投靠函数式或者面向对象。没有原则的好好先生们忙着“解决问题”，却不能清晰地看到这些问题为什么存在。他们所谓的问题，往往是由于现有工具的设计失误。由于他们的“随和”，他们从来不去思考，如何从根源上消灭这些问题。他们在一堆历史遗留的垃圾上缝缝补补，妄图使用设计恶劣的工具建造可靠地软件系统。当然，这代价是非常大的。不但劳神费力，而且也许根本不能解决问题。</p> <p>所以每当有人让我谈谈“函数式 vs 面向对象”，我都避免说“各有各的好处”，因为那样的话我会很容易被当成这种毫无原则的好好先生。</p> <h2 id="符号必须简单的对世界建模"><a href="#符号必须简单的对世界建模" class="header-anchor">#</a> 符号必须简单的对世界建模</h2> <p>从上面你已经看出，我既不是一个铁杆“函数式程序员”，也不是一个铁杆“面向对象程序员”，我也不是一个爱说“各有各的好处”的好好先生。我是一个有原则的批判性思维者。我不但看透了各种语言的本质，而且看透了它们之间的统一关系。我编程的时候看到的不是表面的语言和程序，而是一个类似电路的东西。我看到数据的流动和交换，我看到效率的瓶颈，而这些都是跟具体的语言和范式无关的。</p> <p>在我的心目中其实只有一个概念，它叫做“编程”（programming），它不带有任何附加的限定词（比如“函数式”或者“面向对象”）。我研究的领域称叫做“Programming Languages”，它研究的内容不局限于某一个语言，也不局限于某一类语言，而是所有的语言。在我的眼里，所有的语言都不过是各个特性的组合。所以最近出现的所谓“新语言”，其实不大可能再有什么真正意义上的创新。我不喜欢说“发明一个程序语言”，不喜欢使用“发明”这个词，因为不管你怎么设计一个语言，所有的特性几乎都早已存在于现有的语言里面了。我更喜欢使用“设计”这个词，因为虽然一个语言没有任何新的特性，它却有可能在细节上更加优雅。</p> <p>编程最重要的事情，其实是让写出来的符号，能够简单地对实际或者想象出来的“世界”进行建模。一个程序员最重要的能力，是直觉地看见符号和现实物体之间的对应关系。不管看起来多么酷的语言或者范式，如果必须绕着弯子才能表达程序员心目中的模型，那么它就不是一个很好的语言或者范式。有些东西本来就是有随时间变化的“状态”的，如果你偏要用“纯函数式”语言去描述它，当然你就进入了那些 monad 之类的死胡同。最后你不但没能高效的表达这种副作用，而且让代码变得比过程式语言还要难以理解。如果你进入另一个极端，一定要用对象来表达本来很纯的数学函数，那么你一样会把简单的问题搞复杂。Java 的所谓 design pattern，很多就是制造这种问题的，而没有解决任何问题。</p> <p>关于建模的另外一个问题是，你心里想的模型，并不一定是最好的，也不一定非得设计成那个样子。有些人心里没有一个清晰简单的模型，觉得某些语言“好用”，就因为它们能够对他那种扭曲纷繁的模型进行建模。所以你就跟这种人说不清楚，为什么这个语言不好，因为显然这个语言对他是有用的！如何简化模型，已经超越了语言的范畴，在这里我就不细讲了。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/article/reprint/yinwang/20150321-英语口音.html" class="prev">
        英语口音
      </a></span> <span class="next"><a href="/article/reprint/yinwang/20150607-所谓软件工程.html">
        所谓软件工程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5fe66d2b.js" defer></script><script src="/assets/js/2.db22a8ef.js" defer></script><script src="/assets/js/78.318a4702.js" defer></script>
  </body>
</html>
