<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>对 Go 语言的综合评价 | YuweiYin</title>
    <meta name="description" content="Homepage of YuweiYin">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/Joey_Moon.jpeg">
    
    <link rel="preload" href="/assets/css/0.styles.2d4b740c.css" as="style"><link rel="preload" href="/assets/js/app.5fe66d2b.js" as="script"><link rel="preload" href="/assets/js/2.db22a8ef.js" as="script"><link rel="preload" href="/assets/js/61.579c6b40.js" as="script"><link rel="prefetch" href="/assets/js/10.a3c5f82b.js"><link rel="prefetch" href="/assets/js/100.25f731f1.js"><link rel="prefetch" href="/assets/js/101.95520bfc.js"><link rel="prefetch" href="/assets/js/102.2a5f065a.js"><link rel="prefetch" href="/assets/js/103.ea2207e8.js"><link rel="prefetch" href="/assets/js/104.176a28b1.js"><link rel="prefetch" href="/assets/js/105.73b6444d.js"><link rel="prefetch" href="/assets/js/106.4e40fd25.js"><link rel="prefetch" href="/assets/js/107.c8a120d6.js"><link rel="prefetch" href="/assets/js/108.932f18fd.js"><link rel="prefetch" href="/assets/js/109.99384793.js"><link rel="prefetch" href="/assets/js/11.4db5e70e.js"><link rel="prefetch" href="/assets/js/110.f37d3028.js"><link rel="prefetch" href="/assets/js/111.9c3728dd.js"><link rel="prefetch" href="/assets/js/112.9b20b881.js"><link rel="prefetch" href="/assets/js/113.8afa9829.js"><link rel="prefetch" href="/assets/js/114.d6b67040.js"><link rel="prefetch" href="/assets/js/115.b111a31c.js"><link rel="prefetch" href="/assets/js/116.05c26ded.js"><link rel="prefetch" href="/assets/js/117.23007ff9.js"><link rel="prefetch" href="/assets/js/118.6bb0ac3f.js"><link rel="prefetch" href="/assets/js/119.0e90ff0c.js"><link rel="prefetch" href="/assets/js/12.9d54cbe3.js"><link rel="prefetch" href="/assets/js/120.5fe35fef.js"><link rel="prefetch" href="/assets/js/121.53aef676.js"><link rel="prefetch" href="/assets/js/122.28500515.js"><link rel="prefetch" href="/assets/js/123.6014dfed.js"><link rel="prefetch" href="/assets/js/124.47bd67e9.js"><link rel="prefetch" href="/assets/js/125.d5df8c6e.js"><link rel="prefetch" href="/assets/js/126.b5452614.js"><link rel="prefetch" href="/assets/js/127.80127f3a.js"><link rel="prefetch" href="/assets/js/128.fb05e0d3.js"><link rel="prefetch" href="/assets/js/129.29f21c7c.js"><link rel="prefetch" href="/assets/js/13.72e7ec90.js"><link rel="prefetch" href="/assets/js/130.20d56e75.js"><link rel="prefetch" href="/assets/js/131.272c54da.js"><link rel="prefetch" href="/assets/js/132.443fab1f.js"><link rel="prefetch" href="/assets/js/133.7f924f45.js"><link rel="prefetch" href="/assets/js/134.ffbc102d.js"><link rel="prefetch" href="/assets/js/135.7cfe27e8.js"><link rel="prefetch" href="/assets/js/136.9ec27922.js"><link rel="prefetch" href="/assets/js/137.20e4c90e.js"><link rel="prefetch" href="/assets/js/138.aafd2cb3.js"><link rel="prefetch" href="/assets/js/139.5a776289.js"><link rel="prefetch" href="/assets/js/14.08fda9d5.js"><link rel="prefetch" href="/assets/js/140.7f0d5a76.js"><link rel="prefetch" href="/assets/js/141.62809160.js"><link rel="prefetch" href="/assets/js/142.d3c4302e.js"><link rel="prefetch" href="/assets/js/143.231887f0.js"><link rel="prefetch" href="/assets/js/144.5ad5130c.js"><link rel="prefetch" href="/assets/js/145.38af9eb2.js"><link rel="prefetch" href="/assets/js/146.034fc5e5.js"><link rel="prefetch" href="/assets/js/147.f318a0a8.js"><link rel="prefetch" href="/assets/js/148.77061ccb.js"><link rel="prefetch" href="/assets/js/149.c092d85c.js"><link rel="prefetch" href="/assets/js/15.4c4120da.js"><link rel="prefetch" href="/assets/js/150.a054bff2.js"><link rel="prefetch" href="/assets/js/151.826fa71b.js"><link rel="prefetch" href="/assets/js/152.527e6077.js"><link rel="prefetch" href="/assets/js/153.81d679d7.js"><link rel="prefetch" href="/assets/js/154.2bc5ffde.js"><link rel="prefetch" href="/assets/js/155.b9b13530.js"><link rel="prefetch" href="/assets/js/16.b57803b5.js"><link rel="prefetch" href="/assets/js/17.6c67a731.js"><link rel="prefetch" href="/assets/js/18.4314a4f9.js"><link rel="prefetch" href="/assets/js/19.98325dd7.js"><link rel="prefetch" href="/assets/js/20.58497778.js"><link rel="prefetch" href="/assets/js/21.ee85575b.js"><link rel="prefetch" href="/assets/js/22.f9177e8a.js"><link rel="prefetch" href="/assets/js/23.535f5278.js"><link rel="prefetch" href="/assets/js/24.98239ac0.js"><link rel="prefetch" href="/assets/js/25.3fa496a9.js"><link rel="prefetch" href="/assets/js/26.12a234e5.js"><link rel="prefetch" href="/assets/js/27.11e9a72b.js"><link rel="prefetch" href="/assets/js/28.9609bd69.js"><link rel="prefetch" href="/assets/js/29.b8f23768.js"><link rel="prefetch" href="/assets/js/3.50f8bbe8.js"><link rel="prefetch" href="/assets/js/30.fc389988.js"><link rel="prefetch" href="/assets/js/31.1e97f7b3.js"><link rel="prefetch" href="/assets/js/32.b2fba7e7.js"><link rel="prefetch" href="/assets/js/33.8274d279.js"><link rel="prefetch" href="/assets/js/34.ba3d1402.js"><link rel="prefetch" href="/assets/js/35.c41e1c7b.js"><link rel="prefetch" href="/assets/js/36.f3b32f34.js"><link rel="prefetch" href="/assets/js/37.1e204cb6.js"><link rel="prefetch" href="/assets/js/38.fc3f1b10.js"><link rel="prefetch" href="/assets/js/39.3d75fb7e.js"><link rel="prefetch" href="/assets/js/4.afea0107.js"><link rel="prefetch" href="/assets/js/40.f957f497.js"><link rel="prefetch" href="/assets/js/41.2c46ce9d.js"><link rel="prefetch" href="/assets/js/42.2c181064.js"><link rel="prefetch" href="/assets/js/43.ac880784.js"><link rel="prefetch" href="/assets/js/44.c844b0f2.js"><link rel="prefetch" href="/assets/js/45.1dac8487.js"><link rel="prefetch" href="/assets/js/46.94667594.js"><link rel="prefetch" href="/assets/js/47.f250da85.js"><link rel="prefetch" href="/assets/js/48.bc3995b5.js"><link rel="prefetch" href="/assets/js/49.c65e96f2.js"><link rel="prefetch" href="/assets/js/5.2b1d7a9b.js"><link rel="prefetch" href="/assets/js/50.2ce67839.js"><link rel="prefetch" href="/assets/js/51.c4e2bee0.js"><link rel="prefetch" href="/assets/js/52.51e753d3.js"><link rel="prefetch" href="/assets/js/53.f43494bc.js"><link rel="prefetch" href="/assets/js/54.96a786f8.js"><link rel="prefetch" href="/assets/js/55.f5eac491.js"><link rel="prefetch" href="/assets/js/56.0d83c660.js"><link rel="prefetch" href="/assets/js/57.4246a61a.js"><link rel="prefetch" href="/assets/js/58.4940b2c6.js"><link rel="prefetch" href="/assets/js/59.5c48a75b.js"><link rel="prefetch" href="/assets/js/6.69130e47.js"><link rel="prefetch" href="/assets/js/60.2ecaa699.js"><link rel="prefetch" href="/assets/js/62.e06c706c.js"><link rel="prefetch" href="/assets/js/63.e634b4b5.js"><link rel="prefetch" href="/assets/js/64.642cdc35.js"><link rel="prefetch" href="/assets/js/65.90871f39.js"><link rel="prefetch" href="/assets/js/66.61464e4e.js"><link rel="prefetch" href="/assets/js/67.f7dca67e.js"><link rel="prefetch" href="/assets/js/68.3b78c51b.js"><link rel="prefetch" href="/assets/js/69.1eb0e02e.js"><link rel="prefetch" href="/assets/js/7.a7c09506.js"><link rel="prefetch" href="/assets/js/70.5306286c.js"><link rel="prefetch" href="/assets/js/71.952be6cf.js"><link rel="prefetch" href="/assets/js/72.36f9472d.js"><link rel="prefetch" href="/assets/js/73.9f34a1bf.js"><link rel="prefetch" href="/assets/js/74.516357ef.js"><link rel="prefetch" href="/assets/js/75.b8860c49.js"><link rel="prefetch" href="/assets/js/76.a8838f91.js"><link rel="prefetch" href="/assets/js/77.f33fd1a7.js"><link rel="prefetch" href="/assets/js/78.318a4702.js"><link rel="prefetch" href="/assets/js/79.2d604598.js"><link rel="prefetch" href="/assets/js/8.237cb64d.js"><link rel="prefetch" href="/assets/js/80.20cc8933.js"><link rel="prefetch" href="/assets/js/81.0502a089.js"><link rel="prefetch" href="/assets/js/82.dc550a28.js"><link rel="prefetch" href="/assets/js/83.42b6df92.js"><link rel="prefetch" href="/assets/js/84.5b07f534.js"><link rel="prefetch" href="/assets/js/85.b280078f.js"><link rel="prefetch" href="/assets/js/86.9061351d.js"><link rel="prefetch" href="/assets/js/87.25b9a4d9.js"><link rel="prefetch" href="/assets/js/88.74a3576d.js"><link rel="prefetch" href="/assets/js/89.0aa450f8.js"><link rel="prefetch" href="/assets/js/9.e7b6c0c9.js"><link rel="prefetch" href="/assets/js/90.6df32b76.js"><link rel="prefetch" href="/assets/js/91.cc347fca.js"><link rel="prefetch" href="/assets/js/92.29acb8a9.js"><link rel="prefetch" href="/assets/js/93.ab281914.js"><link rel="prefetch" href="/assets/js/94.a7ee16fc.js"><link rel="prefetch" href="/assets/js/95.18fcad10.js"><link rel="prefetch" href="/assets/js/96.c6839ad4.js"><link rel="prefetch" href="/assets/js/97.3cb1ddc1.js"><link rel="prefetch" href="/assets/js/98.cfabecd9.js"><link rel="prefetch" href="/assets/js/99.2d3b457c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2d4b740c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">YuweiYin</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/home/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章" class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/article/technology/" class="nav-link">
  技术
</a></li><li class="dropdown-item"><!----> <a href="/article/essay/" class="nav-link">
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/article/other/" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="/article/reprint/" class="nav-link router-link-active">
  转载
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://www.github.com/YuweiYin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/home/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章" class="dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/article/technology/" class="nav-link">
  技术
</a></li><li class="dropdown-item"><!----> <a href="/article/essay/" class="nav-link">
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/article/other/" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="/article/reprint/" class="nav-link router-link-active">
  转载
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://www.github.com/YuweiYin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/article/reprint/" class="sidebar-link">Reprint</a></li><li><a href="/article/reprint/yinwang/20120518-什么是“对用户友好”.html" class="sidebar-link">什么是“对用户友好”</a></li><li><a href="/article/reprint/yinwang/20120704-GTF-Great Teacher Friedman.html" class="sidebar-link">GTF - Great Teacher Friedman</a></li><li><a href="/article/reprint/yinwang/20120725-什么是语义学.html" class="sidebar-link">什么是语义学</a></li><li><a href="/article/reprint/yinwang/20120801-怎样写一个解释器.html" class="sidebar-link">怎样写一个解释器</a></li><li><a href="/article/reprint/yinwang/20120918-TeXmacs-一个真正“所见即所得”的排版系统.html" class="sidebar-link">TeXmacs：一个真正“所见即所得”的排版系统.md</a></li><li><a href="/article/reprint/yinwang/20130304-Braid-一个发人深思的游戏.html" class="sidebar-link">Braid - 一个发人深思的游戏</a></li><li><a href="/article/reprint/yinwang/20130307-解密“设计模式”.html" class="sidebar-link">解密“设计模式”</a></li><li><a href="/article/reprint/yinwang/20130307-谈 Linux，Windows 和 Mac.html" class="sidebar-link">谈 Linux，Windows 和 Mac</a></li><li><a href="/article/reprint/yinwang/20130307-Oberon操作系统-被忽略的珍宝.html" class="sidebar-link">Oberon 操作系统：被忽略的珍宝</a></li><li><a href="/article/reprint/yinwang/20130308-谈语法.html" class="sidebar-link">谈语法</a></li><li><a href="/article/reprint/yinwang/20130315-程序语言的常见设计错误(1)-片面追求短小.html" class="sidebar-link">程序语言的常见设计错误(1) - 片面追求短小</a></li><li><a href="/article/reprint/yinwang/20130319-“解决问题”与“消灭问题”.html" class="sidebar-link">“解决问题”与“消灭问题”</a></li><li><a href="/article/reprint/yinwang/20130324-论对东西的崇拜.html" class="sidebar-link">论对东西的崇拜</a></li><li><a href="/article/reprint/yinwang/20130326-Lisp 已死，Lisp 万岁！.html" class="sidebar-link">论对东西的崇拜</a></li><li><a href="/article/reprint/yinwang/20130328-Chez Scheme 的传说.html" class="sidebar-link">Chez Scheme 的传说</a></li><li><a href="/article/reprint/yinwang/20130329-什么是“脚本语言”.html" class="sidebar-link">什么是“脚本语言”</a></li><li><a href="/article/reprint/yinwang/20130331-函数式语言的宗教.html" class="sidebar-link">函数式语言的宗教</a></li><li><a href="/article/reprint/yinwang/20130401-惰性求值.html" class="sidebar-link">惰性求值</a></li><li><a href="/article/reprint/yinwang/20130402-Currying的局限性.html" class="sidebar-link">Currying 的局限性</a></li><li><a href="/article/reprint/yinwang/20130403-爱因斯坦谈教育.html" class="sidebar-link">爱因斯坦谈教育</a></li><li><a href="/article/reprint/yinwang/20130407-测试驱动开发.html" class="sidebar-link">测试驱动开发</a></li><li><a href="/article/reprint/yinwang/20130410-我为什么离开Cornell.html" class="sidebar-link">我为什么离开 Cornell</a></li><li><a href="/article/reprint/yinwang/20130411-Scheme编程环境的设置.html" class="sidebar-link">Scheme 编程环境的设置</a></li><li><a href="/article/reprint/yinwang/20130412-什么是启发.html" class="sidebar-link">什么是启发</a></li><li><a href="/article/reprint/yinwang/20130413-谈程序的“通用性”.html" class="sidebar-link">谈程序的“通用性”</a></li><li><a href="/article/reprint/yinwang/20130414-标准化试卷标记语言.html" class="sidebar-link">标准化试卷标记语言</a></li><li><a href="/article/reprint/yinwang/20130414-论“我”和“我们”.html" class="sidebar-link">论“我”和“我们”</a></li><li><a href="/article/reprint/yinwang/20130414-一种新的操作系统设计.html" class="sidebar-link">一种新的操作系统设计</a></li><li><a href="/article/reprint/yinwang/20130414-Markdown的一些问题.html" class="sidebar-link">Markdown 的一些问题</a></li><li><a href="/article/reprint/yinwang/20130415-几个超炫的专业词汇.html" class="sidebar-link">几个超炫的专业词汇</a></li><li><a href="/article/reprint/yinwang/20130416-Yoda表示法错在哪里.html" class="sidebar-link">Yoda 表示法错在哪里</a></li><li><a href="/article/reprint/yinwang/20130417-关于语言的思考.html" class="sidebar-link">关于语言的思考</a></li><li><a href="/article/reprint/yinwang/20130418-程序语言的常见设计错误(2)-试图容纳世界.html" class="sidebar-link">程序语言的常见设计错误(2) - 试图容纳世界</a></li><li><a href="/article/reprint/yinwang/20130420-编辑器与IDE.html" class="sidebar-link">编辑器与IDE</a></li><li><a href="/article/reprint/yinwang/20130421-程序语言不是工具.html" class="sidebar-link">程序语言不是工具</a></li><li><a href="/article/reprint/yinwang/20130421-ydiff-结构化的程序比较.html" class="sidebar-link">ydiff - 结构化的程序比较</a></li><li><a href="/article/reprint/yinwang/20130426-原因与证明.html" class="sidebar-link">原因与证明</a></li><li><a href="/article/reprint/yinwang/20130619-我离开了Coverity.html" class="sidebar-link">我离开了 Coverity</a></li><li><a href="/article/reprint/yinwang/20130706-PyDiff-Python结构化程序比较工具.html" class="sidebar-link">PyDiff - Python 结构化程序比较工具</a></li><li><a href="/article/reprint/yinwang/20130713-丘奇和图灵.html" class="sidebar-link">丘奇和图灵</a></li><li><a href="/article/reprint/yinwang/20131125-PySonar2与Sourcegraph集成完毕.html" class="sidebar-link">PySonar2 与 Sourcegraph 集成完毕</a></li><li><a href="/article/reprint/yinwang/20140104-我和权威的故事.html" class="sidebar-link">我和权威的故事</a></li><li><a href="/article/reprint/yinwang/20140125-程序语言与…….html" class="sidebar-link">程序语言与……</a></li><li><a href="/article/reprint/yinwang/20140128-RubySonar-一个Ruby静态分析器.html" class="sidebar-link">RubySonar：一个 Ruby 静态分析器</a></li><li><a href="/article/reprint/yinwang/20140204-程序语言与它们的工具.html" class="sidebar-link">程序语言与它们的工具</a></li><li><a href="/article/reprint/yinwang/20140209-程序员的心理疾病.html" class="sidebar-link">程序员的心理疾病</a></li><li><a href="/article/reprint/yinwang/20140215-我的第一次和最后一次Hackathon经历.html" class="sidebar-link">我的第一次和最后一次 Hackathon 经历</a></li><li><a href="/article/reprint/yinwang/20140218-一个对Dijkstra的采访视频.html" class="sidebar-link">一个对 Dijkstra 的采访视频</a></li><li><a href="/article/reprint/yinwang/20140324-学术腐败是历史的必然.html" class="sidebar-link">学术腐败是历史的必然</a></li><li><a href="/article/reprint/yinwang/20140410-电视编剧的问题.html" class="sidebar-link">电视编剧的问题</a></li><li><a href="/article/reprint/yinwang/20140411-黑客文化的精髓.html" class="sidebar-link">黑客文化的精髓</a></li><li><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html" class="active sidebar-link">对 Go 语言的综合评价</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#定位和优点" class="sidebar-link">定位和优点</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#语法" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#工具链" class="sidebar-link">工具链</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#内存管理" class="sidebar-link">内存管理</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#没有-generics" class="sidebar-link">没有“generics”</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#多返回值" class="sidebar-link">多返回值</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#接口" class="sidebar-link">接口</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#goroutine" class="sidebar-link">goroutine</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#defer" class="sidebar-link">defer</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#库代码" class="sidebar-link">库代码</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#html-template-库" class="sidebar-link">HTML template 库</a></li><li class="sidebar-sub-header"><a href="/article/reprint/yinwang/20140418-对Go语言的综合评价.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/article/reprint/yinwang/20140424-关系式模型的实质.html" class="sidebar-link">关系式模型的实质</a></li><li><a href="/article/reprint/yinwang/20140814-谦虚不是一种美德.html" class="sidebar-link">谦虚不是一种美德</a></li><li><a href="/article/reprint/yinwang/20140815-贡献和价值.html" class="sidebar-link">贡献和价值</a></li><li><a href="/article/reprint/yinwang/20140915-谈创新.html" class="sidebar-link">谈创新</a></li><li><a href="/article/reprint/yinwang/20141112-恶评《星际穿越》.html" class="sidebar-link">恶评《星际穿越》</a></li><li><a href="/article/reprint/yinwang/20150105-牛校综合征.html" class="sidebar-link">牛校综合征</a></li><li><a href="/article/reprint/yinwang/20150119-小费和中国人的尊严.html" class="sidebar-link">小费和中国人的尊严</a></li><li><a href="/article/reprint/yinwang/20150201-创造者的思维方式.html" class="sidebar-link">创造者的思维方式</a></li><li><a href="/article/reprint/yinwang/20150220-其他人的BUG.html" class="sidebar-link">其他人的BUG</a></li><li><a href="/article/reprint/yinwang/20150224-所谓“人为错误”.html" class="sidebar-link">所谓“人为错误”</a></li><li><a href="/article/reprint/yinwang/20150303-怎样尊重一个程序员.html" class="sidebar-link">怎样尊重一个程序员</a></li><li><a href="/article/reprint/yinwang/20150311-关于Git的礼节.html" class="sidebar-link">关于Git的礼节</a></li><li><a href="/article/reprint/yinwang/20150317-设计的重要性.html" class="sidebar-link">设计的重要性</a></li><li><a href="/article/reprint/yinwang/20150320-为什么拍照是个坏习惯.html" class="sidebar-link">为什么拍照是个坏习惯</a></li><li><a href="/article/reprint/yinwang/20150320-智商的圈套.html" class="sidebar-link">智商的圈套</a></li><li><a href="/article/reprint/yinwang/20150321-英语口音.html" class="sidebar-link">英语口音</a></li><li><a href="/article/reprint/yinwang/20150403-编程的宗派.html" class="sidebar-link">编程的宗派</a></li><li><a href="/article/reprint/yinwang/20150607-所谓软件工程.html" class="sidebar-link">所谓软件工程</a></li><li><a href="/article/reprint/yinwang/20150614-DRY原则的误区.html" class="sidebar-link">DRY原则的误区</a></li><li><a href="/article/reprint/yinwang/20150702-谈程序的正确性.html" class="sidebar-link">谈程序的正确性</a></li><li><a href="/article/reprint/yinwang/20150704-数学和编程.html" class="sidebar-link">数学和编程</a></li><li><a href="/article/reprint/yinwang/20150919-对Parser的误解.html" class="sidebar-link">对 Parser 的误解</a></li><li><a href="/article/reprint/yinwang/20151018-图灵的光环.html" class="sidebar-link">图灵的光环</a></li><li><a href="/article/reprint/yinwang/20151121-编程的智慧.html" class="sidebar-link">编程的智慧</a></li><li><a href="/article/reprint/yinwang/20151212-Tesla-Model-S的设计失误.html" class="sidebar-link">Tesla Model S 的设计失误</a></li><li><a href="/article/reprint/yinwang/20151221-Tesla-Model-X的车门设计问题.html" class="sidebar-link">Tesla Model X的车门设计问题</a></li><li><a href="/article/reprint/yinwang/20160110-Tesla-Autopilot.html" class="sidebar-link">Tesla Autopilot</a></li><li><a href="/article/reprint/yinwang/20160118-给Java说句公道话.html" class="sidebar-link">给 Java 说句公道话</a></li><li><a href="/article/reprint/yinwang/20160212-我看自动驾驶技术.html" class="sidebar-link">我看自动驾驶技术</a></li><li><a href="/article/reprint/yinwang/20160309-AlphaGo与人工智能.html" class="sidebar-link">AlphaGo与人工智能</a></li><li><a href="/article/reprint/yinwang/20160319-为什么自动车完全不可以犯错误.html" class="sidebar-link">为什么自动车完全不可以犯错误</a></li><li><a href="/article/reprint/yinwang/20160331-我为什么不再做PL人.html" class="sidebar-link">我为什么不再做 PL 人</a></li><li><a href="/article/reprint/yinwang/20160522-正面思维的误区.html" class="sidebar-link">正面思维的误区</a></li><li><a href="/article/reprint/yinwang/20160606-Swift语言的设计错误.html" class="sidebar-link">Swift 语言的设计错误</a></li><li><a href="/article/reprint/yinwang/20160608-Java有值类型吗？.html" class="sidebar-link">Java 有值类型吗？</a></li><li><a href="/article/reprint/yinwang/20160614-美国社会的信息不平等现象.html" class="sidebar-link">美国社会的信息不平等现象</a></li><li><a href="/article/reprint/yinwang/20160628-养生节目的危害.html" class="sidebar-link">养生节目的危害</a></li><li><a href="/article/reprint/yinwang/20160710-Tesla-autopilot引起致命车祸.html" class="sidebar-link">Tesla autopilot 引起致命车祸</a></li><li><a href="/article/reprint/yinwang/20160914-测试的道理.html" class="sidebar-link">测试的道理</a></li><li><a href="/article/reprint/yinwang/20160918-对Rust语言的分析.html" class="sidebar-link">对 Rust 语言的分析</a></li><li><a href="/article/reprint/yinwang/20161012-C编译器优化的Bug.html" class="sidebar-link">C 编译器优化的 Bug</a></li><li><a href="/article/reprint/yinwang/20161013-C.html#%E7%9A%84IDisposable%E6%8E%A5%E5%8F%A3.html" class="sidebar-link">C# 的 IDisposable 接口</a></li><li><a href="/article/reprint/yinwang/20170414-经验和洞察力.html" class="sidebar-link">经验和洞察力</a></li><li><a href="/article/reprint/yinwang/20170417-美国公司管理层的洗脑技巧.html" class="sidebar-link">美国公司管理层的洗脑技巧</a></li><li><a href="/article/reprint/yinwang/20170423-人工智能的局限性.html" class="sidebar-link">人工智能的局限性</a></li><li><a href="/article/reprint/yinwang/20170508-美国企业的装嫩问题.html" class="sidebar-link">美国企业的装嫩问题</a></li><li><a href="/article/reprint/yinwang/20170517-什么是现实理想主义者.html" class="sidebar-link">什么是现实理想主义者</a></li><li><a href="/article/reprint/yinwang/20170523-Kotlin和Checked-Exception.html" class="sidebar-link">Kotlin 和 Checked Exception</a></li><li><a href="/article/reprint/yinwang/20170525-DSL的误区.html" class="sidebar-link">DSL 的误区</a></li><li><a href="/article/reprint/yinwang/20170706-带猫回国经历.html" class="sidebar-link">带猫回国经历</a></li><li><a href="/article/reprint/yinwang/20170706-如何掌握所有的程序语言.html" class="sidebar-link">如何掌握所有的程序语言</a></li><li><a href="/article/reprint/yinwang/20170708-生活的智慧.html" class="sidebar-link">生活的智慧</a></li><li><a href="/article/reprint/yinwang/20170814-旅行的智慧.html" class="sidebar-link">旅行的智慧</a></li><li><a href="/article/reprint/yinwang/20170819-知乎和MITBBS.html" class="sidebar-link">知乎和 MITBBS</a></li><li><a href="/article/reprint/yinwang/20171016-人体工学.html" class="sidebar-link">人体工学</a></li><li><a href="/article/reprint/yinwang/20171101-理性的力量.html" class="sidebar-link">理性的力量</a></li><li><a href="/article/reprint/yinwang/20171109-iPhoneX.html" class="sidebar-link">iPhone X</a></li><li><a href="/article/reprint/yinwang/20180222-智能合约和形式验证.html" class="sidebar-link">智能合约和形式验证</a></li><li><a href="/article/reprint/yinwang/20180308-从苹果产品的设计错误学教训.html" class="sidebar-link">从苹果产品的设计错误学教训</a></li><li><a href="/article/reprint/yinwang/20180327-扶门的礼仪.html" class="sidebar-link">扶门的礼仪</a></li><li><a href="/article/reprint/yinwang/20180413-解谜计算机科学.html" class="sidebar-link">解谜计算机科学</a></li><li><a href="/article/reprint/yinwang/20181123-解谜英语语法.html" class="sidebar-link">解谜英语语法</a></li><li><a href="/article/reprint/yinwang/20190712-学习的智慧.html" class="sidebar-link">学习的智慧</a></li><li><a href="/article/reprint/yinwang/20190721-再谈“PvsNP”问题.html" class="sidebar-link">再谈“P vs NP”问题</a></li><li><a href="/article/reprint/yinwang/20190731-关于人的素质.html" class="sidebar-link">关于人的素质</a></li><li><a href="/article/reprint/yinwang/20190817-中国人的信任危机.html" class="sidebar-link">中国人的信任危机</a></li><li><a href="/article/reprint/yinwang/20190819-关于微内核的对话.html" class="sidebar-link">关于微内核的对话</a></li><li><a href="/article/reprint/yinwang/20190911-Talk-is-not-cheap.html" class="sidebar-link">Talk is not cheap</a></li><li><a href="/article/reprint/yinwang/20190914-机器与人类视觉能力的差距（1）.html" class="sidebar-link">机器与人类视觉能力的差距（1）</a></li><li><a href="/article/reprint/yinwang/20190915-机器与人类视觉能力的差距（2）.html" class="sidebar-link">机器与人类视觉能力的差距（2）</a></li><li><a href="/article/reprint/yinwang/20190916-机器与人类视觉能力的差距（3）.html" class="sidebar-link">机器与人类视觉能力的差距（3）</a></li><li><a href="/article/reprint/yinwang/20190930-自动驾驶车的责任和风险分析.html" class="sidebar-link">自动驾驶车的责任和风险分析</a></li><li><a href="/article/reprint/yinwang/20191017-免费食物不是好事.html" class="sidebar-link">免费食物不是好事</a></li><li><a href="/article/reprint/yinwang/20191024-写在1024程序员节.html" class="sidebar-link">写在 1024 程序员节</a></li><li><a href="/article/reprint/yinwang/20191105-永恒.html" class="sidebar-link">永恒</a></li><li><a href="/article/reprint/yinwang/20191215-自动化服务的误区.html" class="sidebar-link">自动化服务的误区</a></li><li><a href="/article/reprint/yinwang/20191223-抱怨与观察的差别.html" class="sidebar-link">抱怨与观察的差别</a></li><li><a href="/article/reprint/yinwang/20191224-我不是编译器专家.html" class="sidebar-link">我不是编译器专家</a></li><li><a href="/article/reprint/yinwang/20191226-所谓“成功”.html" class="sidebar-link">所谓“成功”</a></li><li><a href="/article/reprint/yinwang/20191231-2020新年寄语.html" class="sidebar-link">2020新年寄语</a></li><li><a href="/article/reprint/yinwang/20200115-未来的事业.html" class="sidebar-link">未来的事业</a></li><li><a href="/article/reprint/yinwang/20200116-我的事业计划.html" class="sidebar-link">我的事业计划</a></li><li><a href="/article/reprint/yinwang/20200117-顾问业务试运营（v2.0）.html" class="sidebar-link">顾问业务试运营（v2.0）</a></li><li><a href="/article/reprint/yinwang/20200205-如何阅读别人的代码.html" class="sidebar-link">如何阅读别人的代码</a></li><li><a href="/article/reprint/yinwang/20200213-一道Java面试题.html" class="sidebar-link">一道 Java 面试题</a></li><li><a href="/article/reprint/yinwang/20200303-计算机科学课程.html" class="sidebar-link">计算机科学课程</a></li><li><a href="/article/reprint/yinwang/20200305-知识星球试运营.html" class="sidebar-link">知识星球试运营</a></li><li><a href="/article/reprint/yinwang/20200306-英语学习的一些经验.html" class="sidebar-link">英语学习的一些经验</a></li><li><a href="/article/reprint/yinwang/20200317-谈知识的交流.html" class="sidebar-link">谈知识的交流</a></li><li><a href="/article/reprint/yinwang/20200323-对智商的怀疑.html" class="sidebar-link">对智商的怀疑</a></li><li><a href="/article/reprint/yinwang/20200326-计算机科学入门班报名.html" class="sidebar-link">计算机科学入门班报名</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="对-go-语言的综合评价"><a href="#对-go-语言的综合评价" class="header-anchor">#</a> 对 Go 语言的综合评价</h1> <p>2014年04月18日 - <a href="http://www.yinwang.org/" target="_blank" rel="noopener noreferrer">王垠<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://www.yinwang.org/blog-cn/2014/04/18/golang" target="_blank" rel="noopener noreferrer">原文链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <p>以前写过一些对 Go 语言的负面评价。现在看来，虽然那些评价大部分属实，然而却由于言辞激烈，没有点明具体问题，难以让某些人信服。在经过几个月实际使用 Go 来构造网站之后，我觉得现在是时候对它作一些更加“客观”的评价了。</p> <h2 id="定位和优点"><a href="#定位和优点" class="header-anchor">#</a> 定位和优点</h2> <p>Go 比起 C 和 C++ 确实有它的优点，这是很显然的事情。它比起 Java 也有少数优点，然而相对而言更多是不足之处。所以我对 Go 的偏好在比 Java 稍低一点的位置。</p> <p>Go 语言比起 C，C++ 的强项，当然是它的简单性和垃圾回收。由于 C 和 C++ 的设计有很多历史遗留问题，所以 Go 看起来确实更加优雅和简单。比起那些大量使用设计模式的 Java 代码，Go 语言的代码也似乎更简单一些。另外，Go 的垃圾回收机制比起 C 和 C++ 的全手动内存管理来说，大大降低了程序员的头脑负担。</p> <p>但是请注意，这里的所谓“优点”都是相对于 C 之类的语言而言的。如果比起另外的一些语言，Go 的这种优点也许就很微不足道，甚至是历史的倒退了。</p> <h2 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h2> <p>Go 的简单性体现在它的语法和语义的某些方面。Go 的语法比 C 要稍好一些，有少数比 Java 更加方便的设计，然而却也有“倒退”的地方。而且这些倒退还不被很多人认为是倒退，反而认为是进步。我现在举出暂时能想得起来的几个方面：</p> <ul><li>进步：Go 有语法支持一种类似 struct literal 的构造，比如你可以写这样的代码来构造一个 S struct：</li></ul> <p><code>S { x: 1, y: 2, }</code></p> <p>这比起 Java 只能用构造函数来创建对象是一个不错的方便性上的改进。这些东西可能借鉴于 JavaScript 等语言的设计。</p> <ul><li>倒退：类型放在变量后面，却没有分隔符。如果变量和它的类型写成像 Pascal 那样的，比如 x : int，那也许还好。然而 Go 的写法却是 x int，没有那个冒号，而且允许使用 x, y int 这样的写法。这种语法跟 var，函数参数组合在一起之后，就产生了扰乱视线的效果。比如你可以写一个函数是这样开头的：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>func foo(s string, x, y, z int, c bool) {
  ...
}
</code></pre></div><p>注意 x, y, z 那个位置，其实是很混淆的。因为看见 x 的时候我不能立即从后面那个符号（, y）看到它是什么类型。所以在 Go 里面我推荐的写法是把 x 和 y 完全分开，就像 C 和 Java 那样，不过类型写在后面：</p> <div class="language- extra-class"><pre class="language-text"><code>  func foo(s string, x int, y int, z int, c bool) {
    ...
  }
</code></pre></div><p>这样一来就比较清晰了，虽然我愿意再多写一些冒号。每一个参数都是“名字 类型”的格式，所以我一眼就看到 x 是 int。虽然多打几个字，然而节省的是“眼球 parse 代码”的开销。</p> <ul><li><p>倒退：类型语法。Go 使用像 []string 这样的语法来表示类型。很多人说这种语法非常“一致”，但经过一段时间我却没有发现他们所谓的一致性在哪里。其实这样的语法很难读，因为类型的各部分之间没有明确的分隔标识符，如果和其他一些符号，比如 * 搭配在一起，你就需要知道一些优先级规则，然后费比较大的功夫去做“眼球 parse”。比如，在 Go 代码里你经常看到 []*Struct 这样的类型，注意 *Struct 要先结合在一起，再作为 [] 的“类型参数”。这种语法缺乏足够的分隔符作为阅读的“边界信号”，一旦后面的类型变得复杂，就很难阅读了。比如，你可以有 *[]*Struct 或者 *[]<em>pkg.Struct 这样的类型。所以这其实还不如像 C++ 的 vector&lt;struct</em>&gt; 这样的写法，也就更不如 Java 或者 Typed Racket 的类型写法来得清晰和简单。</p></li> <li><p>倒退：过度地“语法重载”，比如 switch, for 等关键字。Go 的 switch 关键字其实包含了两种不同的东西。它可以是 C 里面的普通的 switch（Scheme 的 case），也可以是像 Scheme 的 cond 那样的嵌套分支语句。这两种语句其实是语义完全不同的，然而 Go 的设计者为了显得简单，把它们合二为一，而其实引起了更大的混淆。这是因为，就算你把它们合二为一，它们仍然是两种不同的语义结构。把它们合并的结果是，每次看到 switch 你都需要从它们“头部”的不同点把这两种不同的结构区分开来，增加了人脑的开销。正确的作法是把它们分开，就像 Scheme 那样。其实我设计语言的时候有时候也犯同样的错误，以为两个东西“本质”上是一样的，所以合二为一，结果经过一段时间，发现其实是不一样的。所以不要小看了 Scheme，很多你认为是“新想法”的东西，其实早就被它那非常严谨的委员会给抛弃在了历史的长河中。</p></li></ul> <p>Go 语言里面还有其他一些语法设计问题，比如强制把 { 放在一行之后而且不能换行，if 语句的判断开头可以嵌套赋值操作等等。这些试图让程序显得短小的作法，其实反而降低了程序理解的流畅度。</p> <p>所以总而言之，Go 的语法很难被叫做“简单”或者“优雅”，它的简单性其实在 Java 之下。</p> <h2 id="工具链"><a href="#工具链" class="header-anchor">#</a> 工具链</h2> <p>Go 提供了一些比较方便的工具。比如 gofmt，godef 等，使得 Go 代码的编程比起单用 Emacs 或者 VIM 来编辑 C 和 C++ 来说是一个进步。使用 Emacs 编辑 Go 就已经能实现某些 IDE 才有的功能，比如精确的定义跳转等等。</p> <p>这些工具虽然好用，但比起像 Eclipse, IntelliJ 和 Visual Studio 这样的 IDE，差距还是相当大的。比起 IDE，Go 的工具链缺乏各种最基本的功能，比如列出引用了某个变量的所有位置，重命名等 refactor 功能，好用的 debugger （GDB 不算好用）等等。</p> <p>Go 的各种工具感觉都不大成熟，有时候你发现有好几个不同的 package 用于解决同一个问题，搞不清楚哪一个好些。而且这些东西配置起来不是那么的可靠和简单，都需要折腾。每一个小功能你都得从各处去寻找 package 来配置。有些时候一个工具配置了之后其实没有起作用，要等你摸索好半天才发现问题出现在哪里。这种没有组织，没有计划的工具设计，是很难超过专业 IDE 厂商的连贯性的。</p> <p>Go 提供了方便的 package 机制，可以直接 import 某个 GitHub repository 里的 Go 代码。不过我发现很多时候这种 package 机制带来的更多是麻烦事和依赖关系。所以 Go 的推崇者们又设计了一些像 godep 的工具，用来绕过这些问题，结果 godep 自己也引起一些稀奇古怪的问题，导致有时候新的代码其实没有被编译，产生莫名其妙的错误信息（可能是由于 godep 的 bug）。</p> <p>我发现很多人看到这些工具之后总是很狂热的认为它们就能让 Go 语言一统天下，其实还差得非常之远。而且如此年轻的语言就已经出现这么多的问题，我觉得所有这些麻烦事累积下来，多年以后恐怕够呛。</p> <h2 id="内存管理"><a href="#内存管理" class="header-anchor">#</a> 内存管理</h2> <p>比起 C 和 C++ 完全手动的内存管理方式，Go 有垃圾回收（GC）机制。这种机制大大减轻了程序员的头脑负担和程序出错的机会，所以 Go 对于 C/C++ 是一个进步。</p> <p>然而进步也是相对的。Go 的垃圾回收器是一个非常原始的 mark-and-sweep，这比起像 Java，OCaml 和 Chez Scheme 之类的语言实现，其实还处于起步阶段。</p> <p>当然如果真的遇到 GC 性能问题，通过大量的 tuning，你可以部分的改善内存回收的效率。我也看到有人写过一些文章介绍他们如何做这些事情，然而这种文章的存在说明了 Go 的垃圾回收还非常不成熟。GC 这种事情我觉得大部分时候不应该是让程序员来操心的，否则就失去了 GC 比起手动管理的很多优势。所以 Go 代码想要在实时性比较高的场合，还是有很长的路要走的。</p> <p>由于缺乏先进的 GC，却又带有高级的抽象，所以 Go 其实没法取代 C 和 C++ 来构造底层系统。Go 语言的定位对我来说越来越模糊。</p> <h2 id="没有-generics"><a href="#没有-generics" class="header-anchor">#</a> 没有“generics”</h2> <p>比起 C++ 和 Java 来说，Go 缺乏 generics。虽然有人讨厌 Java 的 generics，然而它本身却不是个坏东西。Generics 其实就是 Haskell 等函数式语言里面所谓的 parametric polymorphism，是一种非常有用的东西，不过被 Java 抄去之后有时候没有做得全对。因为 generics 可以让你用同一块代码来处理多种不同的数据类型，它为避免重复，方便替换复杂数据结构等提供了方便。</p> <p>由于 Go 没有 generics，所以你不得不重复写很多函数，每一个只有类型不同。或者你可以用空 interface {}，然而这个东西其实就相当于 C 的 void* 指针。使用它之后，代码的类型无法被静态的检查，所以其实它并没有 generics 来的严谨。</p> <p>比起 Java，Go 的很多数据结构都是“hard code”进了语言里面，甚至创造了特殊的关键字和语法来构造它们（比如哈希表）。一旦遇到用户需要自己定义类似的数据结构，就需要把大量代码重写一遍。而且由于没有类似 Java collections 的东西，无法方便的换掉复杂的数据结构。这对于构造像 PySonar 那样需要大量实验才能选择正确的数据结构，需要实现特殊的哈希表等数据结构的程序来说，Go 语言的这些缺失会是一个非常大的障碍。</p> <p>缺少 generics 是一个问题，然而更严重的问题是 Go 的设计者及其社区对于这类语言特性的盲目排斥。当你提到这些，Go 支持者就会以一种蔑视的态度告诉你：“我看不到 generics 有什么用！”这种态度比起语言本身的缺点来说更加有害。在经过了很长一段时间之后 Go 语言的设计者们开始<a href="https://golang.org/doc/faq#generics" target="_blank" rel="noopener noreferrer">考虑加入 generics<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，然后由于 Go 的语法设计偷工减料，再加上由于缺乏 generics 而产生的特例（比如 Go 的 map 的语法设计）已经被大量使用，我觉得要加入 generics 的难度已经非常大。</p> <p>Go 和 Unix 系统一样，在出现的早期就已经因为不吸取前人的教训，背上了沉重的历史包袱。</p> <h2 id="多返回值"><a href="#多返回值" class="header-anchor">#</a> 多返回值</h2> <p>很多人都觉得 Go 的多返回值设计是一个进步，然而这里面却有很多蹊跷的东西。且不说这根本不是什么新东西（Scheme 很早就有了多返回值 let-values），Go 的多返回值却被大量的用在了错误的地方—Go 利用多返回值来表示出错信息。比如 Go 代码里最常见的结构就是：</p> <div class="language- extra-class"><pre class="language-text"><code>ret, err := foo(x, y, z)
if err != nil {
	return err
}
</code></pre></div><p>如果 foo 的调用产生了错误，那么 err 就不是 nil。Go 要求你在定义了变量之后必须使用它，否则报错。这样它“碰巧”避免了出现错误 err 而不检查的情况。否则如果你想忽略错误，就必须写成</p> <p><code>ret, _ := foo(x, y, z)</code></p> <p>这样当 foo 出错的时候，程序就会自动在那个位置当掉。</p> <p>不得不说，这种“歪打正着”的做法虽然貌似可行，从类型系统角度看，却是非常不严谨的。因为它根本不是为了这个目的而设计的，所以你可以比较容易的想出各种办法让它失效。而且由于编译器只检查 err 是否被“使用”，却不检查你是否检查了“所有”可能出现的错误类型。比如，如果 foo 可能返回两种错误 Error1 和 Error2，你没法保证调用者完全排除了这两种错误的可能性之后才使用数据。所以这种错误检查机制其实还不如 Java 的 exception 来的严谨。</p> <p>另外，ret 和 err 同时被定义，而每次只有其中一个不是 nil，这种“或”的关系并不是靠编译器来保障，而是靠程序员的“约定俗成”。这样当 err 不是 nil 的时候，ret 其实也可以不是 nil。这些组合带来了挺多的混淆，让你每次看到 return 的地方都不确信它到底想返回一个错误还是一个有效值。如果你意识到这种“或”关系其实意味着你只应该用一个返回值来表示它们，你就知道其实 Go 误用了多返回值来表示可能的错误。</p> <p>其实如果一个语言有了像 <a href="https://docs.racket-lang.org/ts-guide/" target="_blank" rel="noopener noreferrer">Typed Racket<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://yinwang0.wordpress.com/2010/09/12/pysonar/" target="_blank" rel="noopener noreferrer">PySonar<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 所支持的 “union type”类型系统，这种多返回值就没有意义了。因为如果有了 union type，你就可以只用一个返回值来表示有效数据或者错误。比如你可以写一个类型叫做 {String, FileNotFound}，用于表示一个值要么是 String，要么是 FileNotFound 错误。如果一个函数有可能返回错误，编译器就强制程序员检查所有可能出现的错误之后才能使用数据，从而可以完全避免以上的各种混淆情况。对 union type 有兴趣的人可以看看 Typed Racket，它拥有我迄今为止见过最强大的类型系统（超越了 Haskell）。</p> <p>所以可以说，Go 的这种多返回值，其实是“歪打”打着了一半，然后换着法子继续歪打，而不是瞄准靶心。</p> <h2 id="接口"><a href="#接口" class="header-anchor">#</a> 接口</h2> <p>Go 采用了基于接口（interface）的面向对象设计，你可以使用接口来表达一些想要进行抽象的概念。</p> <p>然而这种接口设计却不是没有问题的。首先跟 Java 不同，实现一个 Go 的接口不需要显式的声明（implements），所以你有可能“碰巧”实现了某个接口。这种不确定性对于理解程序来说是有反作用的。有时候你修改了一个函数之后就发现编译不通过，抱怨某个位置传递的不是某个需要的接口，然而出错信息却不能告诉你准确的原因。要经过一番摸索你才发现你的 struct 为什么不再实现之前定义的一个接口。</p> <p>另外，有些人使用接口，很多时候不过是为了传递一些函数作为参数。我有时候不明白，这种对于函数式语言再简单不过的事情，在 Go 语言里面为什么要另外定义一个接口来实现。这使得程序不如函数式语言那么清晰明了，而且修改起来也很不方便。有很多冗余的名字要定义，冗余的工作要做。</p> <p>举一个相关的例子就是 Go 的 <a href="https://golang.org/pkg/sort/" target="_blank" rel="noopener noreferrer">Sort<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 函数。每一次需要对某种类型 T 的数组排序，比如 []string，你都需要</p> <ol><li>定义另外一个类型，通常叫做 TSorter，比如 StringSorter</li> <li>为这个 StringSorter 类型定义三个方法，分别叫做 Len, Swap, Less</li> <li>把你的类型比如 []string cast 成 StringSorter</li> <li>调用 sort.Sort 对这个数组排序</li></ol> <p>想想 sort 在函数式语言里有多简单吧？比如，Scheme 和 OCaml 都可以直接这样写：</p> <p><code>(sort '(3 4 1 2) &lt;)</code></p> <p>这里 Scheme 把函数 &lt; 直接作为参数传给 sort 函数，而没有包装在什么接口里面。你发现了吗，Go 的那个 interface 里面的三个方法，其实本来应该作为三个参数直接传递给 Sort，但由于受到 design pattern 等思想的局限，Go 的设计者把它们“打包”作为接口来传递。而且由于 Go 没有 generics，你无法像函数式语言一样写这三个函数，接受比较的“元素”作为参数，而必须使用它们的“下标”。由于这些方法只接受下标作为参数，所以 Sort 只能对数组进行排序。另外由于 Go 的设计比较“底层”，所以你需要另外两个参数: len 和 swap。</p> <p>其实这种基于接口的设计其实比起函数式语言，差距是很大的。比起 Java 的接口设计，也可以说是一个倒退。</p> <h2 id="goroutine"><a href="#goroutine" class="header-anchor">#</a> goroutine</h2> <p>Goroutine 可以说是 Go 的最重要的特色。很多人使用 Go 就是听说 goroutine 能支持所谓的“大并发”。</p> <p>首先这种大并发并不是什么新鲜东西。每个理解程序语言理论的人都知道 goroutine 其实就是一些用户级的 “continuation”。系统级的 continuation 通常被叫做“进程”或者“线程”。Continuation 是函数式语言专家们再了解不过的东西了，比如我的前导师 Amr Sabry 就是关于 continuation 的顶级专家之一。</p> <p>Node.js 那种 “callback hell”，其实就是函数式语言里面常用的一种手法，叫做 continuation passing style (CPS)。由于 Scheme 有 call/cc，所以从理论上讲，它可以不通过 CPS 样式的代码而实现大并发。所以函数式语言只要支持 continuation，就会很容易的实现大并发，也许还会更高效，更好用一些。比如 Scheme 的一个实现 Gambit-C 就可以被用来实现大并发的东西。Chez Scheme 也许也可以，不过还有待确认。</p> <p>当然具体实现上的效率也许有区别，然而我只是说，goroutine 其实并不是像很多人想象的那样全新的，革命性的，独一无二的东西。只要有足够的动力，其它语言都能添加这个东西。</p> <h2 id="defer"><a href="#defer" class="header-anchor">#</a> defer</h2> <p>Go 实现了 defer 函数，用于避免在函数出错后忘了收拾残局（cleanup）。然而我发现这种 defer 函数有被滥用的趋势。比如，有些人把那种不是 cleanup 的动作也做成 defer，到后来累积几个 defer 之后，你就不再能一眼看得清楚到底哪块代码先运行哪块后运行了。位置处于前面的代码居然可以在后来运行，违反了代码的自然位置顺序关系。</p> <p>当然这可以怪程序员不明白 defer 的真正用途，然而一旦你有了这种东西就会有人想滥用它。那种急于试图利用一个语言的每种 feature 的人，特别喜欢干这种事情。这种问题恐怕需要很多年的经验之后，才会有人写成书来教育大家。在形成统一的“代码规范”以前，我预测 defer 仍然会被大量的滥用。</p> <p>所以我们应该想一下，为了避免可能出现的资源泄漏，defer 带来的到底是利多还是弊多。</p> <h2 id="库代码"><a href="#库代码" class="header-anchor">#</a> 库代码</h2> <p>Go 的标准库的设计里面带有浓郁的 Unix 气息。比起 Java 之类的语言，它的库代码有很多不方便的地方。有时候引入了一些函数式语言的方式，但却由于 Unix 思维的限制，不但没能发挥函数式语言的优点，而且导致了很多理解的复杂性。</p> <p>一个例子就是 Go 处理字符串的方式。在 Java 里每个字符串里包含的字符，缺省都是 Unicode 的“code point”。然而在 Go 里面 string 类型里面每个元素都是一个 byte，所以每次你都得把它 cast 成“rune”类型才能正确的遍历每个字符，然后 cast 回去。这种把任何东西都看成 byte 的方式，就是 Unix 的思维方式，它引起过度底层和复杂的代码。</p> <h2 id="html-template-库"><a href="#html-template-库" class="header-anchor">#</a> HTML template 库</h2> <p>我使用过 Go 的 template library 来生成一些网页。这是一种“基本可用”的模板方式，然而比起很多其他成熟的技术，却是相当的不足的。让我比较惊讶的是，Go 的 template 里面夹带的代码，居然不是 Go 语言自己，而是一种表达能力相当弱的语言，有点像一种退化的 Lisp，只不过把括号换成了 { {...} } 这样的东西。</p> <p>比如你可以写这样的网页模板：</p> <div class="language- extra-class"><pre class="language-text"><code>{ {define &quot;Contents&quot;} }
{ {if .Paragraph.Length} }
&lt;p&gt;{ {.Paragraph.Content} }&lt;/p&gt;
{ {end} }
{ {end} }
</code></pre></div><p>由于每个模板接受一个 struct 作为填充的数据，你可以使用 .Paragraph.Content 这样的代码，然而这不但很丑陋，而且让模板不灵活，不好理解。你需要把需要的数据全都放进同一个结构才能从模板里面访问它们。</p> <p>任何超过一行的代码，虽然也许这语言可以表达，一般人为了避免这语言的弱点，还是在 .go 文件里面写一些“帮助函数”。用它们产生数据放进结构，然后传给模板，才能够表达模板需要的一些信息。而这每个帮助函数又需要一定的“注册”信息才能被模板库找到。所以这些复杂性加起来，使得 Go 的 HTML 模板代码相当的麻烦和混乱。</p> <p>听说有人在做一个新的 HTML 模板系统，可以支持直接的 Go 代码嵌入。这些工作刚刚起步，而且难说最后会做成什么样子。所以要做网站，恐怕还是最好使用其他语言比较成熟的框架。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>优雅和简单性都是相对而言的。虽然 Go 语言在很多方面超过了 C 和 C++，也在某些方面好于 Java，然而它其实是没法和 Python 的优雅性相比的，而 Python 在很多方面却又不如 Scheme 和 Haskell。所以总而言之，Go 的简单性和优雅程度属于中等偏下。</p> <p>由于没有明显的优势，却又有各种其它语言里没有的问题，所以在实际工程中，我目前更倾向于使用 Java 这样的语言。我不觉得 Go 语言和它的工具链能够帮助我迅速的写出 PySonar 那样精密的代码。另外我还听说有人使用 Java 来实现大并发，并没发现比起 Go 有什么明显的不足。</p> <p>Alan Perlis 说，语言设计不应该是把功能堆积起来，而应该努力地减少弱点。从这种角度来看，Go 语言引入了一两个新的功能，同时又引入了相当多的弱点。</p> <p>Go 也许暂时在某些个别的情况有特殊的强项，可以单独用于优化系统的某些部分，但我不推荐使用 Go 来实现复杂的算法和整个的系统。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/article/reprint/yinwang/20140411-黑客文化的精髓.html" class="prev">
        黑客文化的精髓
      </a></span> <span class="next"><a href="/article/reprint/yinwang/20140424-关系式模型的实质.html">
        关系式模型的实质
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5fe66d2b.js" defer></script><script src="/assets/js/2.db22a8ef.js" defer></script><script src="/assets/js/61.579c6b40.js" defer></script>
  </body>
</html>
