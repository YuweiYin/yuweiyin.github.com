<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>对 Go 语言的综合评价 | YuweiYin</title>
    <meta name="description" content="Homepage of YuweiYin">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/img/YuweiYin.jpeg">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.2d4b740c.css" as="style"><link rel="preload" href="/assets/js/app.338776d8.js" as="script"><link rel="preload" href="/assets/js/2.5e710586.js" as="script"><link rel="preload" href="/assets/js/233.f6369da9.js" as="script"><link rel="prefetch" href="/assets/js/10.f967ec33.js"><link rel="prefetch" href="/assets/js/100.a918bf34.js"><link rel="prefetch" href="/assets/js/101.e464ffed.js"><link rel="prefetch" href="/assets/js/102.3a55cd96.js"><link rel="prefetch" href="/assets/js/103.d7e285df.js"><link rel="prefetch" href="/assets/js/104.6f9034d1.js"><link rel="prefetch" href="/assets/js/105.567bcf9a.js"><link rel="prefetch" href="/assets/js/106.36477351.js"><link rel="prefetch" href="/assets/js/107.d93634dd.js"><link rel="prefetch" href="/assets/js/108.6a65eea8.js"><link rel="prefetch" href="/assets/js/109.3f687204.js"><link rel="prefetch" href="/assets/js/11.5b164cb4.js"><link rel="prefetch" href="/assets/js/110.b4dc8ef9.js"><link rel="prefetch" href="/assets/js/111.140ef49f.js"><link rel="prefetch" href="/assets/js/112.aa9132ca.js"><link rel="prefetch" href="/assets/js/113.386e4b2c.js"><link rel="prefetch" href="/assets/js/114.2be7cae4.js"><link rel="prefetch" href="/assets/js/115.b726cf6d.js"><link rel="prefetch" href="/assets/js/116.ee059642.js"><link rel="prefetch" href="/assets/js/117.7f774cdf.js"><link rel="prefetch" href="/assets/js/118.74b6de68.js"><link rel="prefetch" href="/assets/js/119.d512e6f3.js"><link rel="prefetch" href="/assets/js/12.61fdaa73.js"><link rel="prefetch" href="/assets/js/120.47edd6d3.js"><link rel="prefetch" href="/assets/js/121.31ec9f51.js"><link rel="prefetch" href="/assets/js/122.30351000.js"><link rel="prefetch" href="/assets/js/123.aa02cb94.js"><link rel="prefetch" href="/assets/js/124.c1f764cf.js"><link rel="prefetch" href="/assets/js/125.0524501e.js"><link rel="prefetch" href="/assets/js/126.6d80204b.js"><link rel="prefetch" href="/assets/js/127.dcf117ed.js"><link rel="prefetch" href="/assets/js/128.69bc2470.js"><link rel="prefetch" href="/assets/js/129.c7de5e6a.js"><link rel="prefetch" href="/assets/js/13.13423942.js"><link rel="prefetch" href="/assets/js/130.107a0d2d.js"><link rel="prefetch" href="/assets/js/131.1df56ec0.js"><link rel="prefetch" href="/assets/js/132.6756aacd.js"><link rel="prefetch" href="/assets/js/133.983902dd.js"><link rel="prefetch" href="/assets/js/134.9835e6be.js"><link rel="prefetch" href="/assets/js/135.c29a8913.js"><link rel="prefetch" href="/assets/js/136.fa35ed67.js"><link rel="prefetch" href="/assets/js/137.1a084d2e.js"><link rel="prefetch" href="/assets/js/138.9c6c6a83.js"><link rel="prefetch" href="/assets/js/139.8874f356.js"><link rel="prefetch" href="/assets/js/14.e2fb8aa6.js"><link rel="prefetch" href="/assets/js/140.2777cfc0.js"><link rel="prefetch" href="/assets/js/141.00c1d847.js"><link rel="prefetch" href="/assets/js/142.3a601367.js"><link rel="prefetch" href="/assets/js/143.a8a9824f.js"><link rel="prefetch" href="/assets/js/144.12e4e356.js"><link rel="prefetch" href="/assets/js/145.38b61aa5.js"><link rel="prefetch" href="/assets/js/146.219cd70a.js"><link rel="prefetch" href="/assets/js/147.ac4650a8.js"><link rel="prefetch" href="/assets/js/148.0511156f.js"><link rel="prefetch" href="/assets/js/149.c1c22b39.js"><link rel="prefetch" href="/assets/js/15.7f07769f.js"><link rel="prefetch" href="/assets/js/150.c5eaaa68.js"><link rel="prefetch" href="/assets/js/151.03599ce7.js"><link rel="prefetch" href="/assets/js/152.fcd974ce.js"><link rel="prefetch" href="/assets/js/153.9091e45c.js"><link rel="prefetch" href="/assets/js/154.6c7ccc17.js"><link rel="prefetch" href="/assets/js/155.16c47efe.js"><link rel="prefetch" href="/assets/js/156.ffe70d22.js"><link rel="prefetch" href="/assets/js/157.436c00ba.js"><link rel="prefetch" href="/assets/js/158.9d96045c.js"><link rel="prefetch" href="/assets/js/159.689c9ddf.js"><link rel="prefetch" href="/assets/js/16.5a323c58.js"><link rel="prefetch" href="/assets/js/160.edda7049.js"><link rel="prefetch" href="/assets/js/161.62badf8c.js"><link rel="prefetch" href="/assets/js/162.abfe29b2.js"><link rel="prefetch" href="/assets/js/163.09214f3c.js"><link rel="prefetch" href="/assets/js/164.03d8ae33.js"><link rel="prefetch" href="/assets/js/165.3b9d5941.js"><link rel="prefetch" href="/assets/js/166.b9a8cc51.js"><link rel="prefetch" href="/assets/js/167.dc295c17.js"><link rel="prefetch" href="/assets/js/168.b4447c67.js"><link rel="prefetch" href="/assets/js/169.f5298f65.js"><link rel="prefetch" href="/assets/js/17.f35473d0.js"><link rel="prefetch" href="/assets/js/170.cc46837a.js"><link rel="prefetch" href="/assets/js/171.b8e0bc09.js"><link rel="prefetch" href="/assets/js/172.1f3e9b4c.js"><link rel="prefetch" href="/assets/js/173.ad3c19e4.js"><link rel="prefetch" href="/assets/js/174.3c39a927.js"><link rel="prefetch" href="/assets/js/175.c85abbec.js"><link rel="prefetch" href="/assets/js/176.d55e245e.js"><link rel="prefetch" href="/assets/js/177.6cb7185e.js"><link rel="prefetch" href="/assets/js/178.9e614d32.js"><link rel="prefetch" href="/assets/js/179.2181acfc.js"><link rel="prefetch" href="/assets/js/18.02dc7ab7.js"><link rel="prefetch" href="/assets/js/180.c090d601.js"><link rel="prefetch" href="/assets/js/181.91db370b.js"><link rel="prefetch" href="/assets/js/182.6eada193.js"><link rel="prefetch" href="/assets/js/183.12cd6d4a.js"><link rel="prefetch" href="/assets/js/184.1ccc4713.js"><link rel="prefetch" href="/assets/js/185.d14590c1.js"><link rel="prefetch" href="/assets/js/186.5dd557ed.js"><link rel="prefetch" href="/assets/js/187.d2e17b0d.js"><link rel="prefetch" href="/assets/js/188.7aafe1eb.js"><link rel="prefetch" href="/assets/js/189.8aceef41.js"><link rel="prefetch" href="/assets/js/19.f64226cb.js"><link rel="prefetch" href="/assets/js/190.c9b1c15b.js"><link rel="prefetch" href="/assets/js/191.70606a81.js"><link rel="prefetch" href="/assets/js/192.05bd6ea2.js"><link rel="prefetch" href="/assets/js/193.e9cdf591.js"><link rel="prefetch" href="/assets/js/194.ebf27382.js"><link rel="prefetch" href="/assets/js/195.54482430.js"><link rel="prefetch" href="/assets/js/196.35bffb17.js"><link rel="prefetch" href="/assets/js/197.5914d2e6.js"><link rel="prefetch" href="/assets/js/198.5e69d743.js"><link rel="prefetch" href="/assets/js/199.dadae2e8.js"><link rel="prefetch" href="/assets/js/20.b665ce81.js"><link rel="prefetch" href="/assets/js/200.917da530.js"><link rel="prefetch" href="/assets/js/201.d3d3d6bd.js"><link rel="prefetch" href="/assets/js/202.6604d2ed.js"><link rel="prefetch" href="/assets/js/203.f6bd1db4.js"><link rel="prefetch" href="/assets/js/204.e7aafd59.js"><link rel="prefetch" href="/assets/js/205.908acc95.js"><link rel="prefetch" href="/assets/js/206.97772be9.js"><link rel="prefetch" href="/assets/js/207.5216da83.js"><link rel="prefetch" href="/assets/js/208.d017221c.js"><link rel="prefetch" href="/assets/js/209.33870b33.js"><link rel="prefetch" href="/assets/js/21.c65c1870.js"><link rel="prefetch" href="/assets/js/210.8daf5510.js"><link rel="prefetch" href="/assets/js/211.f6648c90.js"><link rel="prefetch" href="/assets/js/212.fa602434.js"><link rel="prefetch" href="/assets/js/213.ec9a7b92.js"><link rel="prefetch" href="/assets/js/214.fbffd193.js"><link rel="prefetch" href="/assets/js/215.8f1f172c.js"><link rel="prefetch" href="/assets/js/216.ffe862b7.js"><link rel="prefetch" href="/assets/js/217.bec477c4.js"><link rel="prefetch" href="/assets/js/218.5a6f166d.js"><link rel="prefetch" href="/assets/js/219.bae877e4.js"><link rel="prefetch" href="/assets/js/22.2567d3cf.js"><link rel="prefetch" href="/assets/js/220.094d2873.js"><link rel="prefetch" href="/assets/js/221.fd3e1a1f.js"><link rel="prefetch" href="/assets/js/222.006637e6.js"><link rel="prefetch" href="/assets/js/223.1638798f.js"><link rel="prefetch" href="/assets/js/224.c0b420d7.js"><link rel="prefetch" href="/assets/js/225.3c8aa2c3.js"><link rel="prefetch" href="/assets/js/226.889d304f.js"><link rel="prefetch" href="/assets/js/227.895c2ba6.js"><link rel="prefetch" href="/assets/js/228.29379bcf.js"><link rel="prefetch" href="/assets/js/229.8394d87a.js"><link rel="prefetch" href="/assets/js/23.f741ae26.js"><link rel="prefetch" href="/assets/js/230.98bed704.js"><link rel="prefetch" href="/assets/js/231.eac55cec.js"><link rel="prefetch" href="/assets/js/232.2fc99ed6.js"><link rel="prefetch" href="/assets/js/234.df156227.js"><link rel="prefetch" href="/assets/js/235.5eadd95d.js"><link rel="prefetch" href="/assets/js/236.6c91ae22.js"><link rel="prefetch" href="/assets/js/237.81746335.js"><link rel="prefetch" href="/assets/js/238.41ce5506.js"><link rel="prefetch" href="/assets/js/239.e4ccf186.js"><link rel="prefetch" href="/assets/js/24.f025ec84.js"><link rel="prefetch" href="/assets/js/240.5ad5cee2.js"><link rel="prefetch" href="/assets/js/241.d6a35d18.js"><link rel="prefetch" href="/assets/js/242.4ff20ec6.js"><link rel="prefetch" href="/assets/js/243.576f20e1.js"><link rel="prefetch" href="/assets/js/244.86fd8409.js"><link rel="prefetch" href="/assets/js/245.4e383f82.js"><link rel="prefetch" href="/assets/js/246.7f1d9e62.js"><link rel="prefetch" href="/assets/js/247.98d0de76.js"><link rel="prefetch" href="/assets/js/248.9cdf71b5.js"><link rel="prefetch" href="/assets/js/249.d4ef6b66.js"><link rel="prefetch" href="/assets/js/25.27544cfc.js"><link rel="prefetch" href="/assets/js/250.0410d925.js"><link rel="prefetch" href="/assets/js/251.c7af59ae.js"><link rel="prefetch" href="/assets/js/252.d61700a3.js"><link rel="prefetch" href="/assets/js/253.37371cdd.js"><link rel="prefetch" href="/assets/js/254.44657697.js"><link rel="prefetch" href="/assets/js/255.7b2525a5.js"><link rel="prefetch" href="/assets/js/256.baf1fff0.js"><link rel="prefetch" href="/assets/js/257.b57f3bf8.js"><link rel="prefetch" href="/assets/js/258.429d4e2f.js"><link rel="prefetch" href="/assets/js/259.51d3b3b6.js"><link rel="prefetch" href="/assets/js/26.c2a925b2.js"><link rel="prefetch" href="/assets/js/260.5f987d68.js"><link rel="prefetch" href="/assets/js/261.00668317.js"><link rel="prefetch" href="/assets/js/262.aa89bef2.js"><link rel="prefetch" href="/assets/js/263.32fa0026.js"><link rel="prefetch" href="/assets/js/264.e4e401a0.js"><link rel="prefetch" href="/assets/js/265.3cc461cc.js"><link rel="prefetch" href="/assets/js/266.0417a9cb.js"><link rel="prefetch" href="/assets/js/267.7990cbee.js"><link rel="prefetch" href="/assets/js/268.6adf55f1.js"><link rel="prefetch" href="/assets/js/269.a88fdbb7.js"><link rel="prefetch" href="/assets/js/27.37b34950.js"><link rel="prefetch" href="/assets/js/270.6a31176d.js"><link rel="prefetch" href="/assets/js/271.40d79711.js"><link rel="prefetch" href="/assets/js/272.427070ea.js"><link rel="prefetch" href="/assets/js/273.f7591e26.js"><link rel="prefetch" href="/assets/js/274.1b456b63.js"><link rel="prefetch" href="/assets/js/275.591b2bd3.js"><link rel="prefetch" href="/assets/js/276.75adb3b6.js"><link rel="prefetch" href="/assets/js/277.a2362c20.js"><link rel="prefetch" href="/assets/js/278.4ee60bb5.js"><link rel="prefetch" href="/assets/js/279.660f4251.js"><link rel="prefetch" href="/assets/js/28.0f4bbb5e.js"><link rel="prefetch" href="/assets/js/280.39730018.js"><link rel="prefetch" href="/assets/js/281.1f32fc88.js"><link rel="prefetch" href="/assets/js/282.a5bc1e6e.js"><link rel="prefetch" href="/assets/js/283.b70797a7.js"><link rel="prefetch" href="/assets/js/284.1fc7d948.js"><link rel="prefetch" href="/assets/js/285.cf03c302.js"><link rel="prefetch" href="/assets/js/286.02e50b29.js"><link rel="prefetch" href="/assets/js/287.02402755.js"><link rel="prefetch" href="/assets/js/288.edbc576e.js"><link rel="prefetch" href="/assets/js/289.fb4cf8c2.js"><link rel="prefetch" href="/assets/js/29.564f8e0e.js"><link rel="prefetch" href="/assets/js/290.2cf26f70.js"><link rel="prefetch" href="/assets/js/291.67580e26.js"><link rel="prefetch" href="/assets/js/292.dce634f4.js"><link rel="prefetch" href="/assets/js/293.d4c1532c.js"><link rel="prefetch" href="/assets/js/294.97bdad35.js"><link rel="prefetch" href="/assets/js/295.01df8642.js"><link rel="prefetch" href="/assets/js/296.95f159ff.js"><link rel="prefetch" href="/assets/js/297.3f2e8cb6.js"><link rel="prefetch" href="/assets/js/298.cd089005.js"><link rel="prefetch" href="/assets/js/299.7fe1a970.js"><link rel="prefetch" href="/assets/js/3.9a9af370.js"><link rel="prefetch" href="/assets/js/30.19956ec4.js"><link rel="prefetch" href="/assets/js/300.82c7e2d5.js"><link rel="prefetch" href="/assets/js/301.cb106109.js"><link rel="prefetch" href="/assets/js/302.f3c6aaaa.js"><link rel="prefetch" href="/assets/js/303.1f5e7dda.js"><link rel="prefetch" href="/assets/js/304.b3f0adcf.js"><link rel="prefetch" href="/assets/js/305.3467aaee.js"><link rel="prefetch" href="/assets/js/306.234e8b08.js"><link rel="prefetch" href="/assets/js/307.9327734b.js"><link rel="prefetch" href="/assets/js/308.3f891bed.js"><link rel="prefetch" href="/assets/js/309.53c5b5d5.js"><link rel="prefetch" href="/assets/js/31.5c51ce08.js"><link rel="prefetch" href="/assets/js/310.175b9ccc.js"><link rel="prefetch" href="/assets/js/311.9045049e.js"><link rel="prefetch" href="/assets/js/312.e3cc54ca.js"><link rel="prefetch" href="/assets/js/313.1c2ab56f.js"><link rel="prefetch" href="/assets/js/314.7aa5ec25.js"><link rel="prefetch" href="/assets/js/315.032a37d0.js"><link rel="prefetch" href="/assets/js/316.4b853264.js"><link rel="prefetch" href="/assets/js/317.ff5483a3.js"><link rel="prefetch" href="/assets/js/318.04d8f96a.js"><link rel="prefetch" href="/assets/js/319.1f08f11e.js"><link rel="prefetch" href="/assets/js/32.c552eab3.js"><link rel="prefetch" href="/assets/js/320.999084a0.js"><link rel="prefetch" href="/assets/js/321.f3d0e77a.js"><link rel="prefetch" href="/assets/js/322.98bd4126.js"><link rel="prefetch" href="/assets/js/323.e12970c8.js"><link rel="prefetch" href="/assets/js/324.f2be1859.js"><link rel="prefetch" href="/assets/js/325.e00aca7c.js"><link rel="prefetch" href="/assets/js/326.59c312d8.js"><link rel="prefetch" href="/assets/js/327.c44080fd.js"><link rel="prefetch" href="/assets/js/328.8e805344.js"><link rel="prefetch" href="/assets/js/329.511f5ab9.js"><link rel="prefetch" href="/assets/js/33.2e71c95d.js"><link rel="prefetch" href="/assets/js/330.c67d354c.js"><link rel="prefetch" href="/assets/js/331.53da0aa4.js"><link rel="prefetch" href="/assets/js/332.884c1bcc.js"><link rel="prefetch" href="/assets/js/333.66688fca.js"><link rel="prefetch" href="/assets/js/334.7784446e.js"><link rel="prefetch" href="/assets/js/34.4715792b.js"><link rel="prefetch" href="/assets/js/35.ca84af36.js"><link rel="prefetch" href="/assets/js/36.c31edebc.js"><link rel="prefetch" href="/assets/js/37.92098954.js"><link rel="prefetch" href="/assets/js/38.ecc049e7.js"><link rel="prefetch" href="/assets/js/39.f61cb78d.js"><link rel="prefetch" href="/assets/js/4.d0b4519a.js"><link rel="prefetch" href="/assets/js/40.f736c71e.js"><link rel="prefetch" href="/assets/js/41.6fad76cf.js"><link rel="prefetch" href="/assets/js/42.66f5c85d.js"><link rel="prefetch" href="/assets/js/43.6110bd5a.js"><link rel="prefetch" href="/assets/js/44.8c2a4521.js"><link rel="prefetch" href="/assets/js/45.447e1b3b.js"><link rel="prefetch" href="/assets/js/46.8a78ee37.js"><link rel="prefetch" href="/assets/js/47.aa58d0b6.js"><link rel="prefetch" href="/assets/js/48.56a4614c.js"><link rel="prefetch" href="/assets/js/49.565287b4.js"><link rel="prefetch" href="/assets/js/5.ee9e9007.js"><link rel="prefetch" href="/assets/js/50.4e663700.js"><link rel="prefetch" href="/assets/js/51.948fce4a.js"><link rel="prefetch" href="/assets/js/52.c9e4e6c6.js"><link rel="prefetch" href="/assets/js/53.05935292.js"><link rel="prefetch" href="/assets/js/54.91c7ce05.js"><link rel="prefetch" href="/assets/js/55.ba07dcf9.js"><link rel="prefetch" href="/assets/js/56.9f99d43e.js"><link rel="prefetch" href="/assets/js/57.a9171b61.js"><link rel="prefetch" href="/assets/js/58.6a6a5be5.js"><link rel="prefetch" href="/assets/js/59.85b399bd.js"><link rel="prefetch" href="/assets/js/6.ac40faf8.js"><link rel="prefetch" href="/assets/js/60.0fb661ef.js"><link rel="prefetch" href="/assets/js/61.40edcedb.js"><link rel="prefetch" href="/assets/js/62.fa853823.js"><link rel="prefetch" href="/assets/js/63.a068397d.js"><link rel="prefetch" href="/assets/js/64.2ced4bc7.js"><link rel="prefetch" href="/assets/js/65.8b482577.js"><link rel="prefetch" href="/assets/js/66.a9e2a128.js"><link rel="prefetch" href="/assets/js/67.4e561d8e.js"><link rel="prefetch" href="/assets/js/68.0b673cf1.js"><link rel="prefetch" href="/assets/js/69.fdbdf778.js"><link rel="prefetch" href="/assets/js/7.3f1ed5cd.js"><link rel="prefetch" href="/assets/js/70.88afc254.js"><link rel="prefetch" href="/assets/js/71.78080656.js"><link rel="prefetch" href="/assets/js/72.ae211912.js"><link rel="prefetch" href="/assets/js/73.64dd0cf6.js"><link rel="prefetch" href="/assets/js/74.4f7419c2.js"><link rel="prefetch" href="/assets/js/75.89400b60.js"><link rel="prefetch" href="/assets/js/76.c65d8991.js"><link rel="prefetch" href="/assets/js/77.00a30e67.js"><link rel="prefetch" href="/assets/js/78.579afef9.js"><link rel="prefetch" href="/assets/js/79.a5d0a91b.js"><link rel="prefetch" href="/assets/js/8.e9792fd3.js"><link rel="prefetch" href="/assets/js/80.bae1b070.js"><link rel="prefetch" href="/assets/js/81.813378ea.js"><link rel="prefetch" href="/assets/js/82.e34af38a.js"><link rel="prefetch" href="/assets/js/83.1a9e34b3.js"><link rel="prefetch" href="/assets/js/84.865f324b.js"><link rel="prefetch" href="/assets/js/85.f6a86574.js"><link rel="prefetch" href="/assets/js/86.2fc9ee67.js"><link rel="prefetch" href="/assets/js/87.933bb3b6.js"><link rel="prefetch" href="/assets/js/88.c20736eb.js"><link rel="prefetch" href="/assets/js/89.13947370.js"><link rel="prefetch" href="/assets/js/9.1d1256b9.js"><link rel="prefetch" href="/assets/js/90.9f1b8469.js"><link rel="prefetch" href="/assets/js/91.f8f9ad88.js"><link rel="prefetch" href="/assets/js/92.4756af88.js"><link rel="prefetch" href="/assets/js/93.4d56a2c7.js"><link rel="prefetch" href="/assets/js/94.0500dacc.js"><link rel="prefetch" href="/assets/js/95.78162db3.js"><link rel="prefetch" href="/assets/js/96.ec69af5c.js"><link rel="prefetch" href="/assets/js/97.cc8d35e3.js"><link rel="prefetch" href="/assets/js/98.f3bd6e0f.js"><link rel="prefetch" href="/assets/js/99.c4efab6f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2d4b740c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">YuweiYin</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/home/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/article/mathematics/" class="nav-link">
  数学哲学
</a></div><div class="nav-item"><a href="/article/physics/" class="nav-link">
  物理宇宙
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="信息科学" class="dropdown-title"><span class="title">信息科学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/article/info-technology/computer-science/" class="nav-link">
  计科基础
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/algorithm/" class="nav-link">
  算法编程
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/artificial-intelligence/" class="nav-link">
  人工智能
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/web-crawler/" class="nav-link">
  网络爬虫
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/web-frontend/" class="nav-link">
  网站前端
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/web-backend/" class="nav-link">
  网站后端
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/web-security/" class="nav-link">
  网络安全
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/system-management/" class="nav-link">
  系统管理
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/other/" class="nav-link">
  其它文章
</a></li></ul></div></div><div class="nav-item"><a href="/article/paper-notes/" class="nav-link">
  论文笔记
</a></div><div class="nav-item"><a href="/article/essay/" class="nav-link">
  见闻随笔
</a></div><div class="nav-item"><a href="/article/other/" class="nav-link">
  其它系列
</a></div><div class="nav-item"><a href="/article/reprint/" class="nav-link router-link-active">
  转载文章
</a></div><div class="nav-item"><a href="https://www.github.com/YuweiYin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/home/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/article/mathematics/" class="nav-link">
  数学哲学
</a></div><div class="nav-item"><a href="/article/physics/" class="nav-link">
  物理宇宙
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="信息科学" class="dropdown-title"><span class="title">信息科学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/article/info-technology/computer-science/" class="nav-link">
  计科基础
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/algorithm/" class="nav-link">
  算法编程
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/artificial-intelligence/" class="nav-link">
  人工智能
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/web-crawler/" class="nav-link">
  网络爬虫
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/web-frontend/" class="nav-link">
  网站前端
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/web-backend/" class="nav-link">
  网站后端
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/web-security/" class="nav-link">
  网络安全
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/system-management/" class="nav-link">
  系统管理
</a></li><li class="dropdown-item"><!----> <a href="/article/info-technology/other/" class="nav-link">
  其它文章
</a></li></ul></div></div><div class="nav-item"><a href="/article/paper-notes/" class="nav-link">
  论文笔记
</a></div><div class="nav-item"><a href="/article/essay/" class="nav-link">
  见闻随笔
</a></div><div class="nav-item"><a href="/article/other/" class="nav-link">
  其它系列
</a></div><div class="nav-item"><a href="/article/reprint/" class="nav-link router-link-active">
  转载文章
</a></div><div class="nav-item"><a href="https://www.github.com/YuweiYin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/article/reprint/" class="sidebar-link">转载文章</a></li><li><a href="/article/reprint/yinwang/2012/" class="sidebar-link">王垠 2012 年博客</a></li><li><a href="/article/reprint/yinwang/2013/" class="sidebar-link">王垠 2013 年博客</a></li><li><a href="/article/reprint/yinwang/2014/" class="sidebar-link">王垠 2014 年博客</a></li><li><a href="/article/reprint/yinwang/2015/" class="sidebar-link">王垠 2015 年博客</a></li><li><a href="/article/reprint/yinwang/2016/" class="sidebar-link">王垠 2016 年博客</a></li><li><a href="/article/reprint/yinwang/2017/" class="sidebar-link">王垠 2017 年博客</a></li><li><a href="/article/reprint/yinwang/2018/" class="sidebar-link">王垠 2018 年博客</a></li><li><a href="/article/reprint/yinwang/2019/" class="sidebar-link">王垠 2019 年博客</a></li><li><a href="/article/reprint/yinwang/2020/" class="sidebar-link">王垠 2020 年博客</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="对-go-语言的综合评价"><a href="#对-go-语言的综合评价" class="header-anchor">#</a> 对 Go 语言的综合评价</h1> <p>2014年04月18日 - <a href="http://www.yinwang.org/" target="_blank" rel="noopener noreferrer">王垠<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://www.yinwang.org/blog-cn/2014/04/18/golang" target="_blank" rel="noopener noreferrer">原文链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <p>以前写过一些对 Go 语言的负面评价。现在看来，虽然那些评价大部分属实，然而却由于言辞激烈，没有点明具体问题，难以让某些人信服。在经过几个月实际使用 Go 来构造网站之后，我觉得现在是时候对它作一些更加“客观”的评价了。</p> <h2 id="定位和优点"><a href="#定位和优点" class="header-anchor">#</a> 定位和优点</h2> <p>Go 比起 C 和 C++ 确实有它的优点，这是很显然的事情。它比起 Java 也有少数优点，然而相对而言更多是不足之处。所以我对 Go 的偏好在比 Java 稍低一点的位置。</p> <p>Go 语言比起 C，C++ 的强项，当然是它的简单性和垃圾回收。由于 C 和 C++ 的设计有很多历史遗留问题，所以 Go 看起来确实更加优雅和简单。比起那些大量使用设计模式的 Java 代码，Go 语言的代码也似乎更简单一些。另外，Go 的垃圾回收机制比起 C 和 C++ 的全手动内存管理来说，大大降低了程序员的头脑负担。</p> <p>但是请注意，这里的所谓“优点”都是相对于 C 之类的语言而言的。如果比起另外的一些语言，Go 的这种优点也许就很微不足道，甚至是历史的倒退了。</p> <h2 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h2> <p>Go 的简单性体现在它的语法和语义的某些方面。Go 的语法比 C 要稍好一些，有少数比 Java 更加方便的设计，然而却也有“倒退”的地方。而且这些倒退还不被很多人认为是倒退，反而认为是进步。我现在举出暂时能想得起来的几个方面：</p> <ul><li>进步：Go 有语法支持一种类似 struct literal 的构造，比如你可以写这样的代码来构造一个 S struct：</li></ul> <p><code>S { x: 1, y: 2, }</code></p> <p>这比起 Java 只能用构造函数来创建对象是一个不错的方便性上的改进。这些东西可能借鉴于 JavaScript 等语言的设计。</p> <ul><li>倒退：类型放在变量后面，却没有分隔符。如果变量和它的类型写成像 Pascal 那样的，比如 x : int，那也许还好。然而 Go 的写法却是 x int，没有那个冒号，而且允许使用 x, y int 这样的写法。这种语法跟 var，函数参数组合在一起之后，就产生了扰乱视线的效果。比如你可以写一个函数是这样开头的：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>func foo(s string, x, y, z int, c bool) {
  ...
}
</code></pre></div><p>注意 x, y, z 那个位置，其实是很混淆的。因为看见 x 的时候我不能立即从后面那个符号（, y）看到它是什么类型。所以在 Go 里面我推荐的写法是把 x 和 y 完全分开，就像 C 和 Java 那样，不过类型写在后面：</p> <div class="language- extra-class"><pre class="language-text"><code>  func foo(s string, x int, y int, z int, c bool) {
    ...
  }
</code></pre></div><p>这样一来就比较清晰了，虽然我愿意再多写一些冒号。每一个参数都是“名字 类型”的格式，所以我一眼就看到 x 是 int。虽然多打几个字，然而节省的是“眼球 parse 代码”的开销。</p> <ul><li><p>倒退：类型语法。Go 使用像 []string 这样的语法来表示类型。很多人说这种语法非常“一致”，但经过一段时间我却没有发现他们所谓的一致性在哪里。其实这样的语法很难读，因为类型的各部分之间没有明确的分隔标识符，如果和其他一些符号，比如 * 搭配在一起，你就需要知道一些优先级规则，然后费比较大的功夫去做“眼球 parse”。比如，在 Go 代码里你经常看到 []*Struct 这样的类型，注意 *Struct 要先结合在一起，再作为 [] 的“类型参数”。这种语法缺乏足够的分隔符作为阅读的“边界信号”，一旦后面的类型变得复杂，就很难阅读了。比如，你可以有 *[]*Struct 或者 *[]<em>pkg.Struct 这样的类型。所以这其实还不如像 C++ 的 vector&lt;struct</em>&gt; 这样的写法，也就更不如 Java 或者 Typed Racket 的类型写法来得清晰和简单。</p></li> <li><p>倒退：过度地“语法重载”，比如 switch, for 等关键字。Go 的 switch 关键字其实包含了两种不同的东西。它可以是 C 里面的普通的 switch（Scheme 的 case），也可以是像 Scheme 的 cond 那样的嵌套分支语句。这两种语句其实是语义完全不同的，然而 Go 的设计者为了显得简单，把它们合二为一，而其实引起了更大的混淆。这是因为，就算你把它们合二为一，它们仍然是两种不同的语义结构。把它们合并的结果是，每次看到 switch 你都需要从它们“头部”的不同点把这两种不同的结构区分开来，增加了人脑的开销。正确的作法是把它们分开，就像 Scheme 那样。其实我设计语言的时候有时候也犯同样的错误，以为两个东西“本质”上是一样的，所以合二为一，结果经过一段时间，发现其实是不一样的。所以不要小看了 Scheme，很多你认为是“新想法”的东西，其实早就被它那非常严谨的委员会给抛弃在了历史的长河中。</p></li></ul> <p>Go 语言里面还有其他一些语法设计问题，比如强制把 { 放在一行之后而且不能换行，if 语句的判断开头可以嵌套赋值操作等等。这些试图让程序显得短小的作法，其实反而降低了程序理解的流畅度。</p> <p>所以总而言之，Go 的语法很难被叫做“简单”或者“优雅”，它的简单性其实在 Java 之下。</p> <h2 id="工具链"><a href="#工具链" class="header-anchor">#</a> 工具链</h2> <p>Go 提供了一些比较方便的工具。比如 gofmt，godef 等，使得 Go 代码的编程比起单用 Emacs 或者 VIM 来编辑 C 和 C++ 来说是一个进步。使用 Emacs 编辑 Go 就已经能实现某些 IDE 才有的功能，比如精确的定义跳转等等。</p> <p>这些工具虽然好用，但比起像 Eclipse, IntelliJ 和 Visual Studio 这样的 IDE，差距还是相当大的。比起 IDE，Go 的工具链缺乏各种最基本的功能，比如列出引用了某个变量的所有位置，重命名等 refactor 功能，好用的 debugger （GDB 不算好用）等等。</p> <p>Go 的各种工具感觉都不大成熟，有时候你发现有好几个不同的 package 用于解决同一个问题，搞不清楚哪一个好些。而且这些东西配置起来不是那么的可靠和简单，都需要折腾。每一个小功能你都得从各处去寻找 package 来配置。有些时候一个工具配置了之后其实没有起作用，要等你摸索好半天才发现问题出现在哪里。这种没有组织，没有计划的工具设计，是很难超过专业 IDE 厂商的连贯性的。</p> <p>Go 提供了方便的 package 机制，可以直接 import 某个 GitHub repository 里的 Go 代码。不过我发现很多时候这种 package 机制带来的更多是麻烦事和依赖关系。所以 Go 的推崇者们又设计了一些像 godep 的工具，用来绕过这些问题，结果 godep 自己也引起一些稀奇古怪的问题，导致有时候新的代码其实没有被编译，产生莫名其妙的错误信息（可能是由于 godep 的 bug）。</p> <p>我发现很多人看到这些工具之后总是很狂热的认为它们就能让 Go 语言一统天下，其实还差得非常之远。而且如此年轻的语言就已经出现这么多的问题，我觉得所有这些麻烦事累积下来，多年以后恐怕够呛。</p> <h2 id="内存管理"><a href="#内存管理" class="header-anchor">#</a> 内存管理</h2> <p>比起 C 和 C++ 完全手动的内存管理方式，Go 有垃圾回收（GC）机制。这种机制大大减轻了程序员的头脑负担和程序出错的机会，所以 Go 对于 C/C++ 是一个进步。</p> <p>然而进步也是相对的。Go 的垃圾回收器是一个非常原始的 mark-and-sweep，这比起像 Java，OCaml 和 Chez Scheme 之类的语言实现，其实还处于起步阶段。</p> <p>当然如果真的遇到 GC 性能问题，通过大量的 tuning，你可以部分的改善内存回收的效率。我也看到有人写过一些文章介绍他们如何做这些事情，然而这种文章的存在说明了 Go 的垃圾回收还非常不成熟。GC 这种事情我觉得大部分时候不应该是让程序员来操心的，否则就失去了 GC 比起手动管理的很多优势。所以 Go 代码想要在实时性比较高的场合，还是有很长的路要走的。</p> <p>由于缺乏先进的 GC，却又带有高级的抽象，所以 Go 其实没法取代 C 和 C++ 来构造底层系统。Go 语言的定位对我来说越来越模糊。</p> <h2 id="没有-generics"><a href="#没有-generics" class="header-anchor">#</a> 没有“generics”</h2> <p>比起 C++ 和 Java 来说，Go 缺乏 generics。虽然有人讨厌 Java 的 generics，然而它本身却不是个坏东西。Generics 其实就是 Haskell 等函数式语言里面所谓的 parametric polymorphism，是一种非常有用的东西，不过被 Java 抄去之后有时候没有做得全对。因为 generics 可以让你用同一块代码来处理多种不同的数据类型，它为避免重复，方便替换复杂数据结构等提供了方便。</p> <p>由于 Go 没有 generics，所以你不得不重复写很多函数，每一个只有类型不同。或者你可以用空 interface {}，然而这个东西其实就相当于 C 的 void* 指针。使用它之后，代码的类型无法被静态的检查，所以其实它并没有 generics 来的严谨。</p> <p>比起 Java，Go 的很多数据结构都是“hard code”进了语言里面，甚至创造了特殊的关键字和语法来构造它们（比如哈希表）。一旦遇到用户需要自己定义类似的数据结构，就需要把大量代码重写一遍。而且由于没有类似 Java collections 的东西，无法方便的换掉复杂的数据结构。这对于构造像 PySonar 那样需要大量实验才能选择正确的数据结构，需要实现特殊的哈希表等数据结构的程序来说，Go 语言的这些缺失会是一个非常大的障碍。</p> <p>缺少 generics 是一个问题，然而更严重的问题是 Go 的设计者及其社区对于这类语言特性的盲目排斥。当你提到这些，Go 支持者就会以一种蔑视的态度告诉你：“我看不到 generics 有什么用！”这种态度比起语言本身的缺点来说更加有害。在经过了很长一段时间之后 Go 语言的设计者们开始<a href="https://golang.org/doc/faq#generics" target="_blank" rel="noopener noreferrer">考虑加入 generics<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，然后由于 Go 的语法设计偷工减料，再加上由于缺乏 generics 而产生的特例（比如 Go 的 map 的语法设计）已经被大量使用，我觉得要加入 generics 的难度已经非常大。</p> <p>Go 和 Unix 系统一样，在出现的早期就已经因为不吸取前人的教训，背上了沉重的历史包袱。</p> <h2 id="多返回值"><a href="#多返回值" class="header-anchor">#</a> 多返回值</h2> <p>很多人都觉得 Go 的多返回值设计是一个进步，然而这里面却有很多蹊跷的东西。且不说这根本不是什么新东西（Scheme 很早就有了多返回值 let-values），Go 的多返回值却被大量的用在了错误的地方—Go 利用多返回值来表示出错信息。比如 Go 代码里最常见的结构就是：</p> <div class="language- extra-class"><pre class="language-text"><code>ret, err := foo(x, y, z)
if err != nil {
	return err
}
</code></pre></div><p>如果 foo 的调用产生了错误，那么 err 就不是 nil。Go 要求你在定义了变量之后必须使用它，否则报错。这样它“碰巧”避免了出现错误 err 而不检查的情况。否则如果你想忽略错误，就必须写成</p> <p><code>ret, _ := foo(x, y, z)</code></p> <p>这样当 foo 出错的时候，程序就会自动在那个位置当掉。</p> <p>不得不说，这种“歪打正着”的做法虽然貌似可行，从类型系统角度看，却是非常不严谨的。因为它根本不是为了这个目的而设计的，所以你可以比较容易的想出各种办法让它失效。而且由于编译器只检查 err 是否被“使用”，却不检查你是否检查了“所有”可能出现的错误类型。比如，如果 foo 可能返回两种错误 Error1 和 Error2，你没法保证调用者完全排除了这两种错误的可能性之后才使用数据。所以这种错误检查机制其实还不如 Java 的 exception 来的严谨。</p> <p>另外，ret 和 err 同时被定义，而每次只有其中一个不是 nil，这种“或”的关系并不是靠编译器来保障，而是靠程序员的“约定俗成”。这样当 err 不是 nil 的时候，ret 其实也可以不是 nil。这些组合带来了挺多的混淆，让你每次看到 return 的地方都不确信它到底想返回一个错误还是一个有效值。如果你意识到这种“或”关系其实意味着你只应该用一个返回值来表示它们，你就知道其实 Go 误用了多返回值来表示可能的错误。</p> <p>其实如果一个语言有了像 <a href="https://docs.racket-lang.org/ts-guide/" target="_blank" rel="noopener noreferrer">Typed Racket<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://yinwang0.wordpress.com/2010/09/12/pysonar/" target="_blank" rel="noopener noreferrer">PySonar<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 所支持的 “union type”类型系统，这种多返回值就没有意义了。因为如果有了 union type，你就可以只用一个返回值来表示有效数据或者错误。比如你可以写一个类型叫做 {String, FileNotFound}，用于表示一个值要么是 String，要么是 FileNotFound 错误。如果一个函数有可能返回错误，编译器就强制程序员检查所有可能出现的错误之后才能使用数据，从而可以完全避免以上的各种混淆情况。对 union type 有兴趣的人可以看看 Typed Racket，它拥有我迄今为止见过最强大的类型系统（超越了 Haskell）。</p> <p>所以可以说，Go 的这种多返回值，其实是“歪打”打着了一半，然后换着法子继续歪打，而不是瞄准靶心。</p> <h2 id="接口"><a href="#接口" class="header-anchor">#</a> 接口</h2> <p>Go 采用了基于接口（interface）的面向对象设计，你可以使用接口来表达一些想要进行抽象的概念。</p> <p>然而这种接口设计却不是没有问题的。首先跟 Java 不同，实现一个 Go 的接口不需要显式的声明（implements），所以你有可能“碰巧”实现了某个接口。这种不确定性对于理解程序来说是有反作用的。有时候你修改了一个函数之后就发现编译不通过，抱怨某个位置传递的不是某个需要的接口，然而出错信息却不能告诉你准确的原因。要经过一番摸索你才发现你的 struct 为什么不再实现之前定义的一个接口。</p> <p>另外，有些人使用接口，很多时候不过是为了传递一些函数作为参数。我有时候不明白，这种对于函数式语言再简单不过的事情，在 Go 语言里面为什么要另外定义一个接口来实现。这使得程序不如函数式语言那么清晰明了，而且修改起来也很不方便。有很多冗余的名字要定义，冗余的工作要做。</p> <p>举一个相关的例子就是 Go 的 <a href="https://golang.org/pkg/sort/" target="_blank" rel="noopener noreferrer">Sort<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 函数。每一次需要对某种类型 T 的数组排序，比如 []string，你都需要</p> <ol><li>定义另外一个类型，通常叫做 TSorter，比如 StringSorter</li> <li>为这个 StringSorter 类型定义三个方法，分别叫做 Len, Swap, Less</li> <li>把你的类型比如 []string cast 成 StringSorter</li> <li>调用 sort.Sort 对这个数组排序</li></ol> <p>想想 sort 在函数式语言里有多简单吧？比如，Scheme 和 OCaml 都可以直接这样写：</p> <p><code>(sort '(3 4 1 2) &lt;)</code></p> <p>这里 Scheme 把函数 &lt; 直接作为参数传给 sort 函数，而没有包装在什么接口里面。你发现了吗，Go 的那个 interface 里面的三个方法，其实本来应该作为三个参数直接传递给 Sort，但由于受到 design pattern 等思想的局限，Go 的设计者把它们“打包”作为接口来传递。而且由于 Go 没有 generics，你无法像函数式语言一样写这三个函数，接受比较的“元素”作为参数，而必须使用它们的“下标”。由于这些方法只接受下标作为参数，所以 Sort 只能对数组进行排序。另外由于 Go 的设计比较“底层”，所以你需要另外两个参数: len 和 swap。</p> <p>其实这种基于接口的设计其实比起函数式语言，差距是很大的。比起 Java 的接口设计，也可以说是一个倒退。</p> <h2 id="goroutine"><a href="#goroutine" class="header-anchor">#</a> goroutine</h2> <p>Goroutine 可以说是 Go 的最重要的特色。很多人使用 Go 就是听说 goroutine 能支持所谓的“大并发”。</p> <p>首先这种大并发并不是什么新鲜东西。每个理解程序语言理论的人都知道 goroutine 其实就是一些用户级的 “continuation”。系统级的 continuation 通常被叫做“进程”或者“线程”。Continuation 是函数式语言专家们再了解不过的东西了，比如我的前导师 Amr Sabry 就是关于 continuation 的顶级专家之一。</p> <p>Node.js 那种 “callback hell”，其实就是函数式语言里面常用的一种手法，叫做 continuation passing style (CPS)。由于 Scheme 有 call/cc，所以从理论上讲，它可以不通过 CPS 样式的代码而实现大并发。所以函数式语言只要支持 continuation，就会很容易的实现大并发，也许还会更高效，更好用一些。比如 Scheme 的一个实现 Gambit-C 就可以被用来实现大并发的东西。Chez Scheme 也许也可以，不过还有待确认。</p> <p>当然具体实现上的效率也许有区别，然而我只是说，goroutine 其实并不是像很多人想象的那样全新的，革命性的，独一无二的东西。只要有足够的动力，其它语言都能添加这个东西。</p> <h2 id="defer"><a href="#defer" class="header-anchor">#</a> defer</h2> <p>Go 实现了 defer 函数，用于避免在函数出错后忘了收拾残局（cleanup）。然而我发现这种 defer 函数有被滥用的趋势。比如，有些人把那种不是 cleanup 的动作也做成 defer，到后来累积几个 defer 之后，你就不再能一眼看得清楚到底哪块代码先运行哪块后运行了。位置处于前面的代码居然可以在后来运行，违反了代码的自然位置顺序关系。</p> <p>当然这可以怪程序员不明白 defer 的真正用途，然而一旦你有了这种东西就会有人想滥用它。那种急于试图利用一个语言的每种 feature 的人，特别喜欢干这种事情。这种问题恐怕需要很多年的经验之后，才会有人写成书来教育大家。在形成统一的“代码规范”以前，我预测 defer 仍然会被大量的滥用。</p> <p>所以我们应该想一下，为了避免可能出现的资源泄漏，defer 带来的到底是利多还是弊多。</p> <h2 id="库代码"><a href="#库代码" class="header-anchor">#</a> 库代码</h2> <p>Go 的标准库的设计里面带有浓郁的 Unix 气息。比起 Java 之类的语言，它的库代码有很多不方便的地方。有时候引入了一些函数式语言的方式，但却由于 Unix 思维的限制，不但没能发挥函数式语言的优点，而且导致了很多理解的复杂性。</p> <p>一个例子就是 Go 处理字符串的方式。在 Java 里每个字符串里包含的字符，缺省都是 Unicode 的“code point”。然而在 Go 里面 string 类型里面每个元素都是一个 byte，所以每次你都得把它 cast 成“rune”类型才能正确的遍历每个字符，然后 cast 回去。这种把任何东西都看成 byte 的方式，就是 Unix 的思维方式，它引起过度底层和复杂的代码。</p> <h2 id="html-template-库"><a href="#html-template-库" class="header-anchor">#</a> HTML template 库</h2> <p>我使用过 Go 的 template library 来生成一些网页。这是一种“基本可用”的模板方式，然而比起很多其他成熟的技术，却是相当的不足的。让我比较惊讶的是，Go 的 template 里面夹带的代码，居然不是 Go 语言自己，而是一种表达能力相当弱的语言，有点像一种退化的 Lisp，只不过把括号换成了 { {...} } 这样的东西。</p> <p>比如你可以写这样的网页模板：</p> <div class="language- extra-class"><pre class="language-text"><code>{ {define &quot;Contents&quot;} }
{ {if .Paragraph.Length} }
&lt;p&gt;{ {.Paragraph.Content} }&lt;/p&gt;
{ {end} }
{ {end} }
</code></pre></div><p>由于每个模板接受一个 struct 作为填充的数据，你可以使用 .Paragraph.Content 这样的代码，然而这不但很丑陋，而且让模板不灵活，不好理解。你需要把需要的数据全都放进同一个结构才能从模板里面访问它们。</p> <p>任何超过一行的代码，虽然也许这语言可以表达，一般人为了避免这语言的弱点，还是在 .go 文件里面写一些“帮助函数”。用它们产生数据放进结构，然后传给模板，才能够表达模板需要的一些信息。而这每个帮助函数又需要一定的“注册”信息才能被模板库找到。所以这些复杂性加起来，使得 Go 的 HTML 模板代码相当的麻烦和混乱。</p> <p>听说有人在做一个新的 HTML 模板系统，可以支持直接的 Go 代码嵌入。这些工作刚刚起步，而且难说最后会做成什么样子。所以要做网站，恐怕还是最好使用其他语言比较成熟的框架。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>优雅和简单性都是相对而言的。虽然 Go 语言在很多方面超过了 C 和 C++，也在某些方面好于 Java，然而它其实是没法和 Python 的优雅性相比的，而 Python 在很多方面却又不如 Scheme 和 Haskell。所以总而言之，Go 的简单性和优雅程度属于中等偏下。</p> <p>由于没有明显的优势，却又有各种其它语言里没有的问题，所以在实际工程中，我目前更倾向于使用 Java 这样的语言。我不觉得 Go 语言和它的工具链能够帮助我迅速的写出 PySonar 那样精密的代码。另外我还听说有人使用 Java 来实现大并发，并没发现比起 Go 有什么明显的不足。</p> <p>Alan Perlis 说，语言设计不应该是把功能堆积起来，而应该努力地减少弱点。从这种角度来看，Go 语言引入了一两个新的功能，同时又引入了相当多的弱点。</p> <p>Go 也许暂时在某些个别的情况有特殊的强项，可以单独用于优化系统的某些部分，但我不推荐使用 Go 来实现复杂的算法和整个的系统。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.338776d8.js" defer></script><script src="/assets/js/2.5e710586.js" defer></script><script src="/assets/js/233.f6369da9.js" defer></script>
  </body>
</html>
